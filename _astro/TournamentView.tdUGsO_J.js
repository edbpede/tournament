import{a as xt,b as fe,j as a,e as pn,f as Pn,P as J,h as _,k as kn,l as we,m as qe,c as A,S as Yr,n as Xr,o as Vr,u as Je,r as $e,R as Gr,C as Kr,p as qr,T as Jr,q as Qr,O as Zr,B as Ce,t as eo,s as to}from"./TournamentApp.C4M_8JtO.js";import{c as P,r as c}from"./index.DXA_EoSs.js";import{a as no,r as ro}from"./factory.DyD-ZW2I.js";function oo(e){const t=e+"CollectionProvider",[n,r]=xt(t),[o,s]=n(t,{collectionRef:{current:null},itemMap:new Map}),i=w=>{const{scope:m,children:S}=w,C=P.useRef(null),v=P.useRef(new Map).current;return a.jsx(o,{scope:m,itemMap:v,collectionRef:C,children:S})};i.displayName=t;const l=e+"CollectionSlot",d=pn(l),h=P.forwardRef((w,m)=>{const{scope:S,children:C}=w,v=s(l,S),b=fe(m,v.collectionRef);return a.jsx(d,{ref:b,children:C})});h.displayName=l;const f=e+"CollectionItemSlot",u="data-radix-collection-item",p=pn(f),g=P.forwardRef((w,m)=>{const{scope:S,children:C,...v}=w,b=P.useRef(null),R=fe(m,b),N=s(f,S);return P.useEffect(()=>(N.itemMap.set(b,{ref:b,...v}),()=>void N.itemMap.delete(b))),a.jsx(p,{[u]:"",ref:R,children:C})});g.displayName=f;function x(w){const m=s(e+"CollectionConsumer",w);return P.useCallback(()=>{const C=m.collectionRef.current;if(!C)return[];const v=Array.from(C.querySelectorAll(`[${u}]`));return Array.from(m.itemMap.values()).sort((N,E)=>v.indexOf(N.ref.current)-v.indexOf(E.ref.current))},[m.collectionRef,m.itemMap])}return[{Provider:i,Slot:h,ItemSlot:g},x,r]}var so=c.createContext(void 0);function Yt(e){const t=c.useContext(so);return e||t||"ltr"}var It="rovingFocusGroup.onEntryFocus",ao={bubbles:!1,cancelable:!0},Qe="RovingFocusGroup",[Ft,Ln,io]=oo(Qe),[lo,On]=xt(Qe,[io]),[co,uo]=lo(Qe),Fn=c.forwardRef((e,t)=>a.jsx(Ft.Provider,{scope:e.__scopeRovingFocusGroup,children:a.jsx(Ft.Slot,{scope:e.__scopeRovingFocusGroup,children:a.jsx(fo,{...e,ref:t})})}));Fn.displayName=Qe;var fo=c.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:o=!1,dir:s,currentTabStopId:i,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:d,onEntryFocus:h,preventScrollOnEntryFocus:f=!1,...u}=e,p=c.useRef(null),g=fe(t,p),x=Yt(s),[w,m]=kn({prop:i,defaultProp:l??null,onChange:d,caller:Qe}),[S,C]=c.useState(!1),v=we(h),b=Ln(n),R=c.useRef(!1),[N,E]=c.useState(0);return c.useEffect(()=>{const j=p.current;if(j)return j.addEventListener(It,v),()=>j.removeEventListener(It,v)},[v]),a.jsx(co,{scope:n,orientation:r,dir:x,loop:o,currentTabStopId:w,onItemFocus:c.useCallback(j=>m(j),[m]),onItemShiftTab:c.useCallback(()=>C(!0),[]),onFocusableItemAdd:c.useCallback(()=>E(j=>j+1),[]),onFocusableItemRemove:c.useCallback(()=>E(j=>j-1),[]),children:a.jsx(J.div,{tabIndex:S||N===0?-1:0,"data-orientation":r,...u,ref:g,style:{outline:"none",...e.style},onMouseDown:_(e.onMouseDown,()=>{R.current=!0}),onFocus:_(e.onFocus,j=>{const y=!R.current;if(j.target===j.currentTarget&&y&&!S){const D=new CustomEvent(It,ao);if(j.currentTarget.dispatchEvent(D),!D.defaultPrevented){const T=b().filter(V=>V.focusable),z=T.find(V=>V.active),$=T.find(V=>V.id===w),ye=[z,$,...T].filter(Boolean).map(V=>V.ref.current);Bn(ye,f)}}R.current=!1}),onBlur:_(e.onBlur,()=>C(!1))})})}),_n="RovingFocusGroupItem",zn=c.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:o=!1,tabStopId:s,children:i,...l}=e,d=Pn(),h=s||d,f=uo(_n,n),u=f.currentTabStopId===h,p=Ln(n),{onFocusableItemAdd:g,onFocusableItemRemove:x,currentTabStopId:w}=f;return c.useEffect(()=>{if(r)return g(),()=>x()},[r,g,x]),a.jsx(Ft.ItemSlot,{scope:n,id:h,focusable:r,active:o,children:a.jsx(J.span,{tabIndex:u?0:-1,"data-orientation":f.orientation,...l,ref:t,onMouseDown:_(e.onMouseDown,m=>{r?f.onItemFocus(h):m.preventDefault()}),onFocus:_(e.onFocus,()=>f.onItemFocus(h)),onKeyDown:_(e.onKeyDown,m=>{if(m.key==="Tab"&&m.shiftKey){f.onItemShiftTab();return}if(m.target!==m.currentTarget)return;const S=go(m,f.orientation,f.dir);if(S!==void 0){if(m.metaKey||m.ctrlKey||m.altKey||m.shiftKey)return;m.preventDefault();let v=p().filter(b=>b.focusable).map(b=>b.ref.current);if(S==="last")v.reverse();else if(S==="prev"||S==="next"){S==="prev"&&v.reverse();const b=v.indexOf(m.currentTarget);v=f.loop?vo(v,b+1):v.slice(b+1)}setTimeout(()=>Bn(v))}}),children:typeof i=="function"?i({isCurrentTabStop:u,hasTabStop:w!=null}):i})})});zn.displayName=_n;var ho={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function po(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function go(e,t,n){const r=po(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return ho[r]}function Bn(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function vo(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var mo=Fn,bo=zn,wt="Tabs",[xo]=xt(wt,[On]),Wn=On(),[wo,Xt]=xo(wt),$n=c.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:o,defaultValue:s,orientation:i="horizontal",dir:l,activationMode:d="automatic",...h}=e,f=Yt(l),[u,p]=kn({prop:r,onChange:o,defaultProp:s??"",caller:wt});return a.jsx(wo,{scope:n,baseId:Pn(),value:u,onValueChange:p,orientation:i,dir:f,activationMode:d,children:a.jsx(J.div,{dir:f,"data-orientation":i,...h,ref:t})})});$n.displayName=wt;var Un="TabsList",Hn=c.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...o}=e,s=Xt(Un,n),i=Wn(n);return a.jsx(mo,{asChild:!0,...i,orientation:s.orientation,dir:s.dir,loop:r,children:a.jsx(J.div,{role:"tablist","aria-orientation":s.orientation,...o,ref:t})})});Hn.displayName=Un;var Yn="TabsTrigger",Xn=c.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:o=!1,...s}=e,i=Xt(Yn,n),l=Wn(n),d=Kn(i.baseId,r),h=qn(i.baseId,r),f=r===i.value;return a.jsx(bo,{asChild:!0,...l,focusable:!o,active:f,children:a.jsx(J.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":h,"data-state":f?"active":"inactive","data-disabled":o?"":void 0,disabled:o,id:d,...s,ref:t,onMouseDown:_(e.onMouseDown,u=>{!o&&u.button===0&&u.ctrlKey===!1?i.onValueChange(r):u.preventDefault()}),onKeyDown:_(e.onKeyDown,u=>{[" ","Enter"].includes(u.key)&&i.onValueChange(r)}),onFocus:_(e.onFocus,()=>{const u=i.activationMode!=="manual";!f&&!o&&u&&i.onValueChange(r)})})})});Xn.displayName=Yn;var Vn="TabsContent",Gn=c.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:o,children:s,...i}=e,l=Xt(Vn,n),d=Kn(l.baseId,r),h=qn(l.baseId,r),f=r===l.value,u=c.useRef(f);return c.useEffect(()=>{const p=requestAnimationFrame(()=>u.current=!1);return()=>cancelAnimationFrame(p)},[]),a.jsx(qe,{present:o||f,children:({present:p})=>a.jsx(J.div,{"data-state":f?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":d,hidden:!p,id:h,tabIndex:0,...i,ref:t,style:{...e.style,animationDuration:u.current?"0s":void 0},children:p&&s})})});Gn.displayName=Vn;function Kn(e,t){return`${e}-trigger-${t}`}function qn(e,t){return`${e}-content-${t}`}var yo=$n,So=Hn,Co=Xn,Ro=Gn;function No({className:e,...t}){return a.jsx(yo,{"data-slot":"tabs",className:A("flex flex-col gap-2",e),...t})}function jo({className:e,...t}){return a.jsx(So,{"data-slot":"tabs-list",className:A("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...t})}function At({className:e,...t}){return a.jsx(Co,{"data-slot":"tabs-trigger",className:A("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function Mt({className:e,...t}){return a.jsx(Ro,{"data-slot":"tabs-content",className:A("flex-1 outline-none",e),...t})}function Eo({className:e,...t}){return a.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:a.jsx("table",{"data-slot":"table",className:A("w-full caption-bottom text-sm",e),...t})})}function Do({className:e,...t}){return a.jsx("thead",{"data-slot":"table-header",className:A("[&_tr]:border-b",e),...t})}function To({className:e,...t}){return a.jsx("tbody",{"data-slot":"table-body",className:A("[&_tr:last-child]:border-0",e),...t})}function gn({className:e,...t}){return a.jsx("tr",{"data-slot":"table-row",className:A("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...t})}function it({className:e,...t}){return a.jsx("th",{"data-slot":"table-head",className:A("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}function lt({className:e,...t}){return a.jsx("td",{"data-slot":"table-cell",className:A("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}function ft({className:e,...t}){return a.jsx("div",{"data-slot":"card",className:A("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...t})}const Io=Xr("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function oe({className:e,variant:t,asChild:n=!1,...r}){const o=n?Yr:"span";return a.jsx(o,{"data-slot":"badge",className:A(Io({variant:t}),e),...r})}function Ao(e,[t,n]){return Math.min(n,Math.max(t,e))}function Mo(e,t){return c.useReducer((n,r)=>t[n][r]??n,e)}var Vt="ScrollArea",[Jn]=xt(Vt),[Po,Q]=Jn(Vt),Qn=c.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:o,scrollHideDelay:s=600,...i}=e,[l,d]=c.useState(null),[h,f]=c.useState(null),[u,p]=c.useState(null),[g,x]=c.useState(null),[w,m]=c.useState(null),[S,C]=c.useState(0),[v,b]=c.useState(0),[R,N]=c.useState(!1),[E,j]=c.useState(!1),y=fe(t,T=>d(T)),D=Yt(o);return a.jsx(Po,{scope:n,type:r,dir:D,scrollHideDelay:s,scrollArea:l,viewport:h,onViewportChange:f,content:u,onContentChange:p,scrollbarX:g,onScrollbarXChange:x,scrollbarXEnabled:R,onScrollbarXEnabledChange:N,scrollbarY:w,onScrollbarYChange:m,scrollbarYEnabled:E,onScrollbarYEnabledChange:j,onCornerWidthChange:C,onCornerHeightChange:b,children:a.jsx(J.div,{dir:D,...i,ref:y,style:{position:"relative","--radix-scroll-area-corner-width":S+"px","--radix-scroll-area-corner-height":v+"px",...e.style}})})});Qn.displayName=Vt;var Zn="ScrollAreaViewport",er=c.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:o,...s}=e,i=Q(Zn,n),l=c.useRef(null),d=fe(t,l,i.onViewportChange);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:o}),a.jsx(J.div,{"data-radix-scroll-area-viewport":"",...s,ref:d,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...e.style},children:a.jsx("div",{ref:i.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});er.displayName=Zn;var ae="ScrollAreaScrollbar",tr=c.forwardRef((e,t)=>{const{forceMount:n,...r}=e,o=Q(ae,e.__scopeScrollArea),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:i}=o,l=e.orientation==="horizontal";return c.useEffect(()=>(l?s(!0):i(!0),()=>{l?s(!1):i(!1)}),[l,s,i]),o.type==="hover"?a.jsx(ko,{...r,ref:t,forceMount:n}):o.type==="scroll"?a.jsx(Lo,{...r,ref:t,forceMount:n}):o.type==="auto"?a.jsx(nr,{...r,ref:t,forceMount:n}):o.type==="always"?a.jsx(Gt,{...r,ref:t}):null});tr.displayName=ae;var ko=c.forwardRef((e,t)=>{const{forceMount:n,...r}=e,o=Q(ae,e.__scopeScrollArea),[s,i]=c.useState(!1);return c.useEffect(()=>{const l=o.scrollArea;let d=0;if(l){const h=()=>{window.clearTimeout(d),i(!0)},f=()=>{d=window.setTimeout(()=>i(!1),o.scrollHideDelay)};return l.addEventListener("pointerenter",h),l.addEventListener("pointerleave",f),()=>{window.clearTimeout(d),l.removeEventListener("pointerenter",h),l.removeEventListener("pointerleave",f)}}},[o.scrollArea,o.scrollHideDelay]),a.jsx(qe,{present:n||s,children:a.jsx(nr,{"data-state":s?"visible":"hidden",...r,ref:t})})}),Lo=c.forwardRef((e,t)=>{const{forceMount:n,...r}=e,o=Q(ae,e.__scopeScrollArea),s=e.orientation==="horizontal",i=St(()=>d("SCROLL_END"),100),[l,d]=Mo("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return c.useEffect(()=>{if(l==="idle"){const h=window.setTimeout(()=>d("HIDE"),o.scrollHideDelay);return()=>window.clearTimeout(h)}},[l,o.scrollHideDelay,d]),c.useEffect(()=>{const h=o.viewport,f=s?"scrollLeft":"scrollTop";if(h){let u=h[f];const p=()=>{const g=h[f];u!==g&&(d("SCROLL"),i()),u=g};return h.addEventListener("scroll",p),()=>h.removeEventListener("scroll",p)}},[o.viewport,s,d,i]),a.jsx(qe,{present:n||l!=="hidden",children:a.jsx(Gt,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:_(e.onPointerEnter,()=>d("POINTER_ENTER")),onPointerLeave:_(e.onPointerLeave,()=>d("POINTER_LEAVE"))})})}),nr=c.forwardRef((e,t)=>{const n=Q(ae,e.__scopeScrollArea),{forceMount:r,...o}=e,[s,i]=c.useState(!1),l=e.orientation==="horizontal",d=St(()=>{if(n.viewport){const h=n.viewport.offsetWidth<n.viewport.scrollWidth,f=n.viewport.offsetHeight<n.viewport.scrollHeight;i(l?h:f)}},10);return Ae(n.viewport,d),Ae(n.content,d),a.jsx(qe,{present:r||s,children:a.jsx(Gt,{"data-state":s?"visible":"hidden",...o,ref:t})})}),Gt=c.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,o=Q(ae,e.__scopeScrollArea),s=c.useRef(null),i=c.useRef(0),[l,d]=c.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),h=ir(l.viewport,l.content),f={...r,sizes:l,onSizesChange:d,hasThumb:h>0&&h<1,onThumbChange:p=>s.current=p,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:p=>i.current=p};function u(p,g){return Wo(p,i.current,l,g)}return n==="horizontal"?a.jsx(Oo,{...f,ref:t,onThumbPositionChange:()=>{if(o.viewport&&s.current){const p=o.viewport.scrollLeft,g=vn(p,l,o.dir);s.current.style.transform=`translate3d(${g}px, 0, 0)`}},onWheelScroll:p=>{o.viewport&&(o.viewport.scrollLeft=p)},onDragScroll:p=>{o.viewport&&(o.viewport.scrollLeft=u(p,o.dir))}}):n==="vertical"?a.jsx(Fo,{...f,ref:t,onThumbPositionChange:()=>{if(o.viewport&&s.current){const p=o.viewport.scrollTop,g=vn(p,l);s.current.style.transform=`translate3d(0, ${g}px, 0)`}},onWheelScroll:p=>{o.viewport&&(o.viewport.scrollTop=p)},onDragScroll:p=>{o.viewport&&(o.viewport.scrollTop=u(p))}}):null}),Oo=c.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...o}=e,s=Q(ae,e.__scopeScrollArea),[i,l]=c.useState(),d=c.useRef(null),h=fe(t,d,s.onScrollbarXChange);return c.useEffect(()=>{d.current&&l(getComputedStyle(d.current))},[d]),a.jsx(or,{"data-orientation":"horizontal",...o,ref:h,sizes:n,style:{bottom:0,left:s.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:s.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":yt(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,u)=>{if(s.viewport){const p=s.viewport.scrollLeft+f.deltaX;e.onWheelScroll(p),cr(p,u)&&f.preventDefault()}},onResize:()=>{d.current&&s.viewport&&i&&r({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:pt(i.paddingLeft),paddingEnd:pt(i.paddingRight)}})}})}),Fo=c.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...o}=e,s=Q(ae,e.__scopeScrollArea),[i,l]=c.useState(),d=c.useRef(null),h=fe(t,d,s.onScrollbarYChange);return c.useEffect(()=>{d.current&&l(getComputedStyle(d.current))},[d]),a.jsx(or,{"data-orientation":"vertical",...o,ref:h,sizes:n,style:{top:0,right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":yt(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,u)=>{if(s.viewport){const p=s.viewport.scrollTop+f.deltaY;e.onWheelScroll(p),cr(p,u)&&f.preventDefault()}},onResize:()=>{d.current&&s.viewport&&i&&r({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:pt(i.paddingTop),paddingEnd:pt(i.paddingBottom)}})}})}),[_o,rr]=Jn(ae),or=c.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:o,onThumbChange:s,onThumbPointerUp:i,onThumbPointerDown:l,onThumbPositionChange:d,onDragScroll:h,onWheelScroll:f,onResize:u,...p}=e,g=Q(ae,n),[x,w]=c.useState(null),m=fe(t,y=>w(y)),S=c.useRef(null),C=c.useRef(""),v=g.viewport,b=r.content-r.viewport,R=we(f),N=we(d),E=St(u,10);function j(y){if(S.current){const D=y.clientX-S.current.left,T=y.clientY-S.current.top;h({x:D,y:T})}}return c.useEffect(()=>{const y=D=>{const T=D.target;x?.contains(T)&&R(D,b)};return document.addEventListener("wheel",y,{passive:!1}),()=>document.removeEventListener("wheel",y,{passive:!1})},[v,x,b,R]),c.useEffect(N,[r,N]),Ae(x,E),Ae(g.content,E),a.jsx(_o,{scope:n,scrollbar:x,hasThumb:o,onThumbChange:we(s),onThumbPointerUp:we(i),onThumbPositionChange:N,onThumbPointerDown:we(l),children:a.jsx(J.div,{...p,ref:m,style:{position:"absolute",...p.style},onPointerDown:_(e.onPointerDown,y=>{y.button===0&&(y.target.setPointerCapture(y.pointerId),S.current=x.getBoundingClientRect(),C.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",g.viewport&&(g.viewport.style.scrollBehavior="auto"),j(y))}),onPointerMove:_(e.onPointerMove,j),onPointerUp:_(e.onPointerUp,y=>{const D=y.target;D.hasPointerCapture(y.pointerId)&&D.releasePointerCapture(y.pointerId),document.body.style.webkitUserSelect=C.current,g.viewport&&(g.viewport.style.scrollBehavior=""),S.current=null})})})}),ht="ScrollAreaThumb",sr=c.forwardRef((e,t)=>{const{forceMount:n,...r}=e,o=rr(ht,e.__scopeScrollArea);return a.jsx(qe,{present:n||o.hasThumb,children:a.jsx(zo,{ref:t,...r})})}),zo=c.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...o}=e,s=Q(ht,n),i=rr(ht,n),{onThumbPositionChange:l}=i,d=fe(t,u=>i.onThumbChange(u)),h=c.useRef(void 0),f=St(()=>{h.current&&(h.current(),h.current=void 0)},100);return c.useEffect(()=>{const u=s.viewport;if(u){const p=()=>{if(f(),!h.current){const g=$o(u,l);h.current=g,l()}};return l(),u.addEventListener("scroll",p),()=>u.removeEventListener("scroll",p)}},[s.viewport,f,l]),a.jsx(J.div,{"data-state":i.hasThumb?"visible":"hidden",...o,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:_(e.onPointerDownCapture,u=>{const g=u.target.getBoundingClientRect(),x=u.clientX-g.left,w=u.clientY-g.top;i.onThumbPointerDown({x,y:w})}),onPointerUp:_(e.onPointerUp,i.onThumbPointerUp)})});sr.displayName=ht;var Kt="ScrollAreaCorner",ar=c.forwardRef((e,t)=>{const n=Q(Kt,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?a.jsx(Bo,{...e,ref:t}):null});ar.displayName=Kt;var Bo=c.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,o=Q(Kt,n),[s,i]=c.useState(0),[l,d]=c.useState(0),h=!!(s&&l);return Ae(o.scrollbarX,()=>{const f=o.scrollbarX?.offsetHeight||0;o.onCornerHeightChange(f),d(f)}),Ae(o.scrollbarY,()=>{const f=o.scrollbarY?.offsetWidth||0;o.onCornerWidthChange(f),i(f)}),h?a.jsx(J.div,{...r,ref:t,style:{width:s,height:l,position:"absolute",right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function pt(e){return e?parseInt(e,10):0}function ir(e,t){const n=e/t;return isNaN(n)?0:n}function yt(e){const t=ir(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function Wo(e,t,n,r="ltr"){const o=yt(n),s=o/2,i=t||s,l=o-i,d=n.scrollbar.paddingStart+i,h=n.scrollbar.size-n.scrollbar.paddingEnd-l,f=n.content-n.viewport,u=r==="ltr"?[0,f]:[f*-1,0];return lr([d,h],u)(e)}function vn(e,t,n="ltr"){const r=yt(t),o=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-o,i=t.content-t.viewport,l=s-r,d=n==="ltr"?[0,i]:[i*-1,0],h=Ao(e,d);return lr([0,i],[0,l])(h)}function lr(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function cr(e,t){return e>0&&e<t}var $o=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return(function o(){const s={left:e.scrollLeft,top:e.scrollTop},i=n.left!==s.left,l=n.top!==s.top;(i||l)&&t(),n=s,r=window.requestAnimationFrame(o)})(),()=>window.cancelAnimationFrame(r)};function St(e,t){const n=we(e),r=c.useRef(0);return c.useEffect(()=>()=>window.clearTimeout(r.current),[]),c.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function Ae(e,t){const n=we(t);Vr(()=>{let r=0;if(e){const o=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return o.observe(e),()=>{window.cancelAnimationFrame(r),o.unobserve(e)}}},[e,n])}var Uo=Qn,Ho=er,Yo=ar;function dr({className:e,children:t,...n}){return a.jsxs(Uo,{"data-slot":"scroll-area",className:A("relative",e),...n,children:[a.jsx(Ho,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:t}),a.jsx(Xo,{}),a.jsx(Yo,{})]})}function Xo({className:e,orientation:t="vertical",...n}){return a.jsx(tr,{"data-slot":"scroll-area-scrollbar",orientation:t,className:A("flex touch-none p-px transition-colors select-none",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",e),...n,children:a.jsx(sr,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}var Vo="Separator",mn="horizontal",Go=["horizontal","vertical"],ur=c.forwardRef((e,t)=>{const{decorative:n,orientation:r=mn,...o}=e,s=Ko(r)?r:mn,l=n?{role:"none"}:{"aria-orientation":s==="vertical"?s:void 0,role:"separator"};return a.jsx(J.div,{"data-orientation":s,...l,...o,ref:t})});ur.displayName=Vo;function Ko(e){return Go.includes(e)}var qo=ur;function _t({className:e,orientation:t="horizontal",decorative:n=!0,...r}){return a.jsx(qo,{"data-slot":"separator",decorative:n,orientation:t,className:A("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...r})}function zt(e){const t=new Map;e.forEach(r=>{const o=r.round||1;t.has(o)||t.set(o,[]),t.get(o).push(r)});const n=[];return t.forEach((r,o)=>{n.push({round:o,matches:r.sort((s,i)=>(s.matchNumber||0)-(i.matchNumber||0))})}),n.sort((r,o)=>r.round-o.round)}function fr(e,t){return e===t?"Finals":e===t-1?"Semifinals":e===t-2?"Quarterfinals":`Round ${e}`}function Jo({bracket:e,thirdPlaceMatch:t,participants:n,onMatchClick:r}){const{t:o}=Je(),s=zt(e),i=s.length,l=c.useMemo(()=>new Map(n.map(p=>[p.id,p])),[n]),d=p=>l.get(p)?.name||"TBD",h=p=>l.get(p)?.seed,f=p=>p.status==="completed"?"border-green-500 bg-green-50":p.participantIds.length>=2?"border-blue-500 hover:border-blue-600 cursor-pointer":"border-gray-300",u=(p,g)=>p.result?.winnerId===g;return a.jsx("div",{className:"w-full h-full",children:a.jsx(dr,{className:"w-full h-[calc(100vh-300px)] md:h-[calc(100vh-280px)]",children:a.jsxs("div",{className:"p-4 md:p-6",children:[a.jsx("div",{className:"md:hidden mb-4 text-center",children:a.jsx("p",{className:"text-xs text-gray-500",children:"â† Scroll horizontally to view all rounds â†’"})}),a.jsx("div",{className:"flex gap-4 md:gap-8 min-w-max pb-4",children:s.map((p,g)=>a.jsxs("div",{className:"flex flex-col justify-around min-w-[200px] md:min-w-[240px]",children:[a.jsx("div",{className:"mb-4 text-center",children:a.jsx(oe,{variant:"outline",className:"text-xs md:text-sm font-semibold",children:fr(p.round,i)})}),a.jsx("div",{className:"flex flex-col justify-around gap-3 md:gap-4 flex-1",children:p.matches.map((x,w)=>a.jsxs("div",{className:"relative",style:{marginTop:g>0?`${w*20}px`:"0"},children:[a.jsxs(ft,{className:A("p-2 md:p-3 transition-all touch-manipulation",f(x)),onClick:()=>{x.participantIds.length>=2&&x.status!=="completed"&&r(x)},children:[a.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:["Match #",x.matchNumber]}),a.jsx("div",{className:"space-y-2",children:x.participantIds.length===0?a.jsx("div",{className:"text-sm text-gray-400 italic",children:"Waiting..."}):x.participantIds.length===1?a.jsxs("div",{className:"text-sm",children:[a.jsx("span",{className:"font-medium",children:d(x.participantIds[0])}),a.jsx(oe,{variant:"secondary",className:"ml-2 text-xs",children:"BYE"})]}):x.participantIds.map(m=>{const S=h(m),C=u(x,m);return a.jsxs("div",{className:A("flex items-center justify-between text-sm p-2 rounded",C&&"bg-green-100 font-semibold",!C&&x.status==="completed"&&"opacity-50"),children:[a.jsxs("div",{className:"flex items-center gap-2",children:[S&&a.jsxs("span",{className:"text-xs text-gray-500 font-mono w-6",children:["(",S,")"]}),a.jsx("span",{className:A(C&&"font-semibold"),children:d(m)})]}),C&&a.jsx("span",{className:"text-green-600 font-bold",children:"âœ“"})]},m)})})]}),g<s.length-1&&a.jsx("div",{className:"absolute top-1/2 -right-4 md:-right-8 w-4 md:w-8 h-0.5 bg-gray-300"})]},x.id))})]},p.round))}),t&&a.jsxs(a.Fragment,{children:[a.jsx(_t,{className:"my-8"}),a.jsxs("div",{className:"max-w-md mx-auto",children:[a.jsx("div",{className:"mb-4 text-center",children:a.jsx(oe,{variant:"outline",className:"text-sm font-semibold",children:"Third Place Match"})}),a.jsxs(ft,{className:A("p-3 transition-all",f(t)),onClick:()=>{t.participantIds.length>=2&&t.status!=="completed"&&r(t)},children:[a.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:["Match #",t.matchNumber]}),a.jsx("div",{className:"space-y-2",children:t.participantIds.map(p=>{const g=h(p),x=u(t,p);return a.jsxs("div",{className:A("flex items-center justify-between text-sm p-2 rounded",x&&"bg-green-100 font-semibold",!x&&t.status==="completed"&&"opacity-50"),children:[a.jsxs("div",{className:"flex items-center gap-2",children:[g&&a.jsxs("span",{className:"text-xs text-gray-500 font-mono w-6",children:["(",g,")"]}),a.jsx("span",{className:A(x&&"font-semibold"),children:d(p)})]}),x&&a.jsx("span",{className:"text-green-600 font-bold",children:"âœ“"})]},p)})})]})]})]})]})})})}function Qo({winnersBracket:e,losersBracket:t,grandFinal:n,grandFinalReset:r,participants:o,onMatchClick:s}){const{t:i}=Je(),l=zt(e),d=zt(t),h=c.useMemo(()=>new Map(o.map(m=>[m.id,m])),[o]),f=m=>h.get(m)?.name||"TBD",u=m=>h.get(m)?.seed,p=m=>m.status==="completed"?"border-green-500 bg-green-50":m.participantIds.length>=2?"border-blue-500 hover:border-blue-600 cursor-pointer":"border-gray-300",g=(m,S)=>m.result?.winnerId===S,x=(m,S=!0)=>a.jsxs(ft,{className:A("p-2 md:p-3 transition-all touch-manipulation",p(m)),onClick:()=>{m.participantIds.length>=2&&m.status!=="completed"&&s(m)},children:[S&&a.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:["Match #",m.matchNumber]}),a.jsx("div",{className:"space-y-2",children:m.participantIds.length===0?a.jsx("div",{className:"text-sm text-gray-400 italic",children:"Waiting..."}):m.participantIds.length===1?a.jsxs("div",{className:"text-sm",children:[a.jsx("span",{className:"font-medium",children:f(m.participantIds[0])}),a.jsx(oe,{variant:"secondary",className:"ml-2 text-xs",children:"BYE"})]}):m.participantIds.map(C=>{const v=u(C),b=g(m,C);return a.jsxs("div",{className:A("flex items-center justify-between text-sm p-2 rounded",b&&"bg-green-100 font-semibold",!b&&m.status==="completed"&&"opacity-50"),children:[a.jsxs("div",{className:"flex items-center gap-2",children:[v&&a.jsxs("span",{className:"text-xs text-gray-500 font-mono w-6",children:["(",v,")"]}),a.jsx("span",{className:A(b&&"font-semibold"),children:f(C)})]}),b&&a.jsx("span",{className:"text-green-600 font-bold",children:"âœ“"})]},C)})})]}),w=(m,S,C="default")=>a.jsxs("div",{className:"mb-6 md:mb-8",children:[a.jsx("div",{className:"mb-4",children:a.jsx(oe,{variant:C,className:"text-sm md:text-base font-bold px-3 md:px-4 py-1",children:S})}),a.jsx("div",{className:"flex gap-4 md:gap-8 min-w-max pb-4",children:m.map((v,b)=>a.jsxs("div",{className:"flex flex-col justify-around min-w-[200px] md:min-w-[240px]",children:[a.jsx("div",{className:"mb-4 text-center",children:a.jsx(oe,{variant:"outline",className:"text-xs md:text-sm font-semibold",children:fr(v.round,m.length)})}),a.jsx("div",{className:"flex flex-col justify-around gap-3 md:gap-4 flex-1",children:v.matches.map((R,N)=>a.jsxs("div",{className:"relative",style:{marginTop:b>0?`${N*20}px`:"0"},children:[x(R),b<m.length-1&&a.jsx("div",{className:"absolute top-1/2 -right-4 md:-right-8 w-4 md:w-8 h-0.5 bg-gray-300"})]},R.id))})]},v.round))})]});return a.jsx("div",{className:"w-full h-full",children:a.jsx(dr,{className:"w-full h-[calc(100vh-300px)] md:h-[calc(100vh-280px)]",children:a.jsxs("div",{className:"p-4 md:p-6",children:[a.jsx("div",{className:"md:hidden mb-4 text-center",children:a.jsx("p",{className:"text-xs text-gray-500",children:"â† Scroll horizontally to view all rounds â†’"})}),l.length>0&&w(l,"Winners Bracket","default"),d.length>0&&a.jsxs(a.Fragment,{children:[a.jsx(_t,{className:"my-8"}),w(d,"Losers Bracket","secondary")]}),n&&a.jsxs(a.Fragment,{children:[a.jsx(_t,{className:"my-8"}),a.jsxs("div",{className:"max-w-md mx-auto",children:[a.jsx("div",{className:"mb-4 text-center",children:a.jsx(oe,{className:"text-base font-bold px-4 py-1 bg-yellow-500 hover:bg-yellow-600",children:"ðŸ† Grand Finals"})}),x(n,!1),r&&a.jsxs("div",{className:"mt-4",children:[a.jsx("div",{className:"mb-2 text-center",children:a.jsx(oe,{variant:"outline",className:"text-sm font-semibold",children:"Grand Finals - Reset"})}),x(r,!1)]})]})]})]})})})}function Zo({matches:e,participants:t,onMatchClick:n,groupByRounds:r=!1,showRoundHeaders:o=!1}){const{t:s}=Je(),i=c.useMemo(()=>new Map(t.map(u=>[u.id,u])),[t]),l=u=>i.get(u)?.name||"Unknown",d=u=>u.status==="completed"?"border-green-500 bg-green-50":u.participantIds.length>=2?"border-blue-500 hover:border-blue-600 cursor-pointer":"border-gray-300",h=(u,p)=>u.result?.winnerId===p,f=u=>a.jsxs(ft,{className:A("p-3 md:p-4 transition-all touch-manipulation",d(u)),onClick:()=>{u.participantIds.length>=2&&u.status!=="completed"&&n(u)},children:[u.matchNumber&&a.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:["Match #",u.matchNumber]}),u.participantIds.length===0?a.jsx("div",{className:"text-sm text-gray-400 italic",children:"Waiting for participants..."}):u.participantIds.length===1?a.jsxs("div",{className:"text-sm",children:[a.jsx("span",{className:"font-medium",children:l(u.participantIds[0])}),a.jsx(oe,{variant:"secondary",className:"ml-2 text-xs",children:s("view.bye")})]}):a.jsx("div",{className:"space-y-2",children:u.participantIds.map(p=>{const g=h(u,p);return a.jsxs("div",{className:A("flex items-center justify-between text-sm p-2 rounded",g&&"bg-green-100 font-semibold",!g&&u.status==="completed"&&"opacity-50"),children:[a.jsx("span",{className:A(g&&"font-semibold"),children:l(p)}),g&&a.jsx("span",{className:"text-green-600 font-bold",children:"âœ“"})]},p)})}),u.result?.score&&a.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:["Score: ",u.result.score.participant1Score," - ",u.result.score.participant2Score]})]},u.id);if(r&&o){const u=new Map;e.forEach(g=>{const x=g.round||1;u.has(x)||u.set(x,[]),u.get(x).push(g)});const p=Array.from(u.entries()).sort((g,x)=>g[0]-x[0]);return a.jsx("div",{className:"space-y-6",children:p.map(([g,x])=>a.jsxs("div",{children:[a.jsxs("div",{className:"mb-3",children:[a.jsx(oe,{variant:"outline",className:"text-sm font-semibold",children:s("view.round",{number:g})}),a.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(",x.filter(w=>w.status==="completed").length,"/",x.length," completed)"]})]}),a.jsx("div",{className:"space-y-3",children:x.map(f)})]},g))})}return a.jsx("div",{className:"space-y-3",children:e.length===0?a.jsx("p",{className:"text-sm text-gray-500",children:s("view.noMatches")}):e.map(f)})}function es(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return c.useMemo(()=>r=>{t.forEach(o=>o(r))},t)}const Ct=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Me(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function qt(e){return"nodeType"in e}function W(e){var t,n;return e?Me(e)?e:qt(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function Jt(e){const{Document:t}=W(e);return e instanceof t}function Ze(e){return Me(e)?!1:e instanceof W(e).HTMLElement}function hr(e){return e instanceof W(e).SVGElement}function Pe(e){return e?Me(e)?e.document:qt(e)?Jt(e)?e:Ze(e)||hr(e)?e.ownerDocument:document:document:document}const se=Ct?c.useLayoutEffect:c.useEffect;function Qt(e){const t=c.useRef(e);return se(()=>{t.current=e}),c.useCallback(function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t.current==null?void 0:t.current(...r)},[])}function ts(){const e=c.useRef(null),t=c.useCallback((r,o)=>{e.current=setInterval(r,o)},[]),n=c.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function Xe(e,t){t===void 0&&(t=[e]);const n=c.useRef(e);return se(()=>{n.current!==e&&(n.current=e)},t),n}function et(e,t){const n=c.useRef();return c.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function gt(e){const t=Qt(e),n=c.useRef(null),r=c.useCallback(o=>{o!==n.current&&t?.(o,n.current),n.current=o},[]);return[n,r]}function Bt(e){const t=c.useRef();return c.useEffect(()=>{t.current=e},[e]),t.current}let Pt={};function tt(e,t){return c.useMemo(()=>{if(t)return t;const n=Pt[e]==null?0:Pt[e]+1;return Pt[e]=n,e+"-"+n},[e,t])}function pr(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.reduce((s,i)=>{const l=Object.entries(i);for(const[d,h]of l){const f=s[d];f!=null&&(s[d]=f+e*h)}return s},{...t})}}const Ie=pr(1),Ve=pr(-1);function ns(e){return"clientX"in e&&"clientY"in e}function Zt(e){if(!e)return!1;const{KeyboardEvent:t}=W(e.target);return t&&e instanceof t}function rs(e){if(!e)return!1;const{TouchEvent:t}=W(e.target);return t&&e instanceof t}function Wt(e){if(rs(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return ns(e)?{x:e.clientX,y:e.clientY}:null}const Ge=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[Ge.Translate.toString(e),Ge.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),bn="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function os(e){return e.matches(bn)?e:e.querySelector(bn)}const ss={display:"none"};function as(e){let{id:t,value:n}=e;return P.createElement("div",{id:t,style:ss},n)}function is(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const o={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return P.createElement("div",{id:t,style:o,role:"status","aria-live":r,"aria-atomic":!0},n)}function ls(){const[e,t]=c.useState("");return{announce:c.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const gr=c.createContext(null);function cs(e){const t=c.useContext(gr);c.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function ds(){const[e]=c.useState(()=>new Set),t=c.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[c.useCallback(r=>{let{type:o,event:s}=r;e.forEach(i=>{var l;return(l=i[o])==null?void 0:l.call(i,s)})},[e]),t]}const us={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},fs={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function hs(e){let{announcements:t=fs,container:n,hiddenTextDescribedById:r,screenReaderInstructions:o=us}=e;const{announce:s,announcement:i}=ls(),l=tt("DndLiveRegion"),[d,h]=c.useState(!1);if(c.useEffect(()=>{h(!0)},[]),cs(c.useMemo(()=>({onDragStart(u){let{active:p}=u;s(t.onDragStart({active:p}))},onDragMove(u){let{active:p,over:g}=u;t.onDragMove&&s(t.onDragMove({active:p,over:g}))},onDragOver(u){let{active:p,over:g}=u;s(t.onDragOver({active:p,over:g}))},onDragEnd(u){let{active:p,over:g}=u;s(t.onDragEnd({active:p,over:g}))},onDragCancel(u){let{active:p,over:g}=u;s(t.onDragCancel({active:p,over:g}))}}),[s,t])),!d)return null;const f=P.createElement(P.Fragment,null,P.createElement(as,{id:r,value:o.draggable}),P.createElement(is,{id:l,announcement:i}));return n?$e.createPortal(f,n):f}var k;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(k||(k={}));function vt(){}function xn(e,t){return c.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function ps(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return c.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const ee=Object.freeze({x:0,y:0});function vr(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function mr(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function gs(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function wn(e){let{left:t,top:n,height:r,width:o}=e;return[{x:t,y:n},{x:t+o,y:n},{x:t,y:n+r},{x:t+o,y:n+r}]}function br(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function yn(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const vs=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=yn(t,t.left,t.top),s=[];for(const i of r){const{id:l}=i,d=n.get(l);if(d){const h=vr(yn(d),o);s.push({id:l,data:{droppableContainer:i,value:h}})}}return s.sort(mr)},ms=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=wn(t),s=[];for(const i of r){const{id:l}=i,d=n.get(l);if(d){const h=wn(d),f=o.reduce((p,g,x)=>p+vr(h[x],g),0),u=Number((f/4).toFixed(4));s.push({id:l,data:{droppableContainer:i,value:u}})}}return s.sort(mr)};function bs(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),o=Math.min(t.left+t.width,e.left+e.width),s=Math.min(t.top+t.height,e.top+e.height),i=o-r,l=s-n;if(r<o&&n<s){const d=t.width*t.height,h=e.width*e.height,f=i*l,u=f/(d+h-f);return Number(u.toFixed(4))}return 0}const xs=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=[];for(const s of r){const{id:i}=s,l=n.get(i);if(l){const d=bs(l,t);d>0&&o.push({id:i,data:{droppableContainer:s,value:d}})}}return o.sort(gs)};function ws(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function xr(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:ee}function ys(e){return function(n){for(var r=arguments.length,o=new Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];return o.reduce((i,l)=>({...i,top:i.top+e*l.y,bottom:i.bottom+e*l.y,left:i.left+e*l.x,right:i.right+e*l.x}),{...n})}}const Ss=ys(1);function Cs(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function Rs(e,t,n){const r=Cs(t);if(!r)return e;const{scaleX:o,scaleY:s,x:i,y:l}=r,d=e.left-i-(1-o)*parseFloat(n),h=e.top-l-(1-s)*parseFloat(n.slice(n.indexOf(" ")+1)),f=o?e.width/o:e.width,u=s?e.height/s:e.height;return{width:f,height:u,top:h,right:d+f,bottom:h+u,left:d}}const Ns={ignoreTransform:!1};function ke(e,t){t===void 0&&(t=Ns);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:h,transformOrigin:f}=W(e).getComputedStyle(e);h&&(n=Rs(n,h,f))}const{top:r,left:o,width:s,height:i,bottom:l,right:d}=n;return{top:r,left:o,width:s,height:i,bottom:l,right:d}}function Sn(e){return ke(e,{ignoreTransform:!0})}function js(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function Es(e,t){return t===void 0&&(t=W(e).getComputedStyle(e)),t.position==="fixed"}function Ds(e,t){t===void 0&&(t=W(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(o=>{const s=t[o];return typeof s=="string"?n.test(s):!1})}function Rt(e,t){const n=[];function r(o){if(t!=null&&n.length>=t||!o)return n;if(Jt(o)&&o.scrollingElement!=null&&!n.includes(o.scrollingElement))return n.push(o.scrollingElement),n;if(!Ze(o)||hr(o)||n.includes(o))return n;const s=W(e).getComputedStyle(o);return o!==e&&Ds(o,s)&&n.push(o),Es(o,s)?n:r(o.parentNode)}return e?r(e):n}function wr(e){const[t]=Rt(e,1);return t??null}function kt(e){return!Ct||!e?null:Me(e)?e:qt(e)?Jt(e)||e===Pe(e).scrollingElement?window:Ze(e)?e:null:null}function yr(e){return Me(e)?e.scrollX:e.scrollLeft}function Sr(e){return Me(e)?e.scrollY:e.scrollTop}function $t(e){return{x:yr(e),y:Sr(e)}}var L;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(L||(L={}));function Cr(e){return!Ct||!e?!1:e===document.scrollingElement}function Rr(e){const t={x:0,y:0},n=Cr(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},o=e.scrollTop<=t.y,s=e.scrollLeft<=t.x,i=e.scrollTop>=r.y,l=e.scrollLeft>=r.x;return{isTop:o,isLeft:s,isBottom:i,isRight:l,maxScroll:r,minScroll:t}}const Ts={x:.2,y:.2};function Is(e,t,n,r,o){let{top:s,left:i,right:l,bottom:d}=n;r===void 0&&(r=10),o===void 0&&(o=Ts);const{isTop:h,isBottom:f,isLeft:u,isRight:p}=Rr(e),g={x:0,y:0},x={x:0,y:0},w={height:t.height*o.y,width:t.width*o.x};return!h&&s<=t.top+w.height?(g.y=L.Backward,x.y=r*Math.abs((t.top+w.height-s)/w.height)):!f&&d>=t.bottom-w.height&&(g.y=L.Forward,x.y=r*Math.abs((t.bottom-w.height-d)/w.height)),!p&&l>=t.right-w.width?(g.x=L.Forward,x.x=r*Math.abs((t.right-w.width-l)/w.width)):!u&&i<=t.left+w.width&&(g.x=L.Backward,x.x=r*Math.abs((t.left+w.width-i)/w.width)),{direction:g,speed:x}}function As(e){if(e===document.scrollingElement){const{innerWidth:s,innerHeight:i}=window;return{top:0,left:0,right:s,bottom:i,width:s,height:i}}const{top:t,left:n,right:r,bottom:o}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:o,width:e.clientWidth,height:e.clientHeight}}function Nr(e){return e.reduce((t,n)=>Ie(t,$t(n)),ee)}function Ms(e){return e.reduce((t,n)=>t+yr(n),0)}function Ps(e){return e.reduce((t,n)=>t+Sr(n),0)}function ks(e,t){if(t===void 0&&(t=ke),!e)return;const{top:n,left:r,bottom:o,right:s}=t(e);wr(e)&&(o<=0||s<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const Ls=[["x",["left","right"],Ms],["y",["top","bottom"],Ps]];class en{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Rt(n),o=Nr(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[s,i,l]of Ls)for(const d of i)Object.defineProperty(this,d,{get:()=>{const h=l(r),f=o[s]-h;return this.rect[d]+f},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Ue{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var o;(o=this.target)==null||o.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function Os(e){const{EventTarget:t}=W(e);return e instanceof t?e:Pe(e)}function Lt(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var q;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(q||(q={}));function Cn(e){e.preventDefault()}function Fs(e){e.stopPropagation()}var I;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(I||(I={}));const jr={start:[I.Space,I.Enter],cancel:[I.Esc],end:[I.Space,I.Enter,I.Tab]},_s=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case I.Right:return{...n,x:n.x+25};case I.Left:return{...n,x:n.x-25};case I.Down:return{...n,y:n.y+25};case I.Up:return{...n,y:n.y-25}}};class tn{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new Ue(Pe(n)),this.windowListeners=new Ue(W(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(q.Resize,this.handleCancel),this.windowListeners.add(q.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(q.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&ks(r),n(ee)}handleKeyDown(t){if(Zt(t)){const{active:n,context:r,options:o}=this.props,{keyboardCodes:s=jr,coordinateGetter:i=_s,scrollBehavior:l="smooth"}=o,{code:d}=t;if(s.end.includes(d)){this.handleEnd(t);return}if(s.cancel.includes(d)){this.handleCancel(t);return}const{collisionRect:h}=r.current,f=h?{x:h.left,y:h.top}:ee;this.referenceCoordinates||(this.referenceCoordinates=f);const u=i(t,{active:n,context:r.current,currentCoordinates:f});if(u){const p=Ve(u,f),g={x:0,y:0},{scrollableAncestors:x}=r.current;for(const w of x){const m=t.code,{isTop:S,isRight:C,isLeft:v,isBottom:b,maxScroll:R,minScroll:N}=Rr(w),E=As(w),j={x:Math.min(m===I.Right?E.right-E.width/2:E.right,Math.max(m===I.Right?E.left:E.left+E.width/2,u.x)),y:Math.min(m===I.Down?E.bottom-E.height/2:E.bottom,Math.max(m===I.Down?E.top:E.top+E.height/2,u.y))},y=m===I.Right&&!C||m===I.Left&&!v,D=m===I.Down&&!b||m===I.Up&&!S;if(y&&j.x!==u.x){const T=w.scrollLeft+p.x,z=m===I.Right&&T<=R.x||m===I.Left&&T>=N.x;if(z&&!p.y){w.scrollTo({left:T,behavior:l});return}z?g.x=w.scrollLeft-T:g.x=m===I.Right?w.scrollLeft-R.x:w.scrollLeft-N.x,g.x&&w.scrollBy({left:-g.x,behavior:l});break}else if(D&&j.y!==u.y){const T=w.scrollTop+p.y,z=m===I.Down&&T<=R.y||m===I.Up&&T>=N.y;if(z&&!p.x){w.scrollTo({top:T,behavior:l});return}z?g.y=w.scrollTop-T:g.y=m===I.Down?w.scrollTop-R.y:w.scrollTop-N.y,g.y&&w.scrollBy({top:-g.y,behavior:l});break}}this.handleMove(t,Ie(Ve(u,this.referenceCoordinates),g))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}tn.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=jr,onActivation:o}=t,{active:s}=n;const{code:i}=e.nativeEvent;if(r.start.includes(i)){const l=s.activatorNode.current;return l&&e.target!==l?!1:(e.preventDefault(),o?.({event:e.nativeEvent}),!0)}return!1}}];function Rn(e){return!!(e&&"distance"in e)}function Nn(e){return!!(e&&"delay"in e)}class nn{constructor(t,n,r){var o;r===void 0&&(r=Os(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:s}=t,{target:i}=s;this.props=t,this.events=n,this.document=Pe(i),this.documentListeners=new Ue(this.document),this.listeners=new Ue(r),this.windowListeners=new Ue(W(i)),this.initialCoordinates=(o=Wt(s))!=null?o:ee,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(q.Resize,this.handleCancel),this.windowListeners.add(q.DragStart,Cn),this.windowListeners.add(q.VisibilityChange,this.handleCancel),this.windowListeners.add(q.ContextMenu,Cn),this.documentListeners.add(q.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Nn(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(Rn(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:o}=this.props;o(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(q.Click,Fs,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(q.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:o,props:s}=this,{onMove:i,options:{activationConstraint:l}}=s;if(!o)return;const d=(n=Wt(t))!=null?n:ee,h=Ve(o,d);if(!r&&l){if(Rn(l)){if(l.tolerance!=null&&Lt(h,l.tolerance))return this.handleCancel();if(Lt(h,l.distance))return this.handleStart()}if(Nn(l)&&Lt(h,l.tolerance))return this.handleCancel();this.handlePending(l,h);return}t.cancelable&&t.preventDefault(),i(d)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===I.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const zs={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class rn extends nn{constructor(t){const{event:n}=t,r=Pe(n.target);super(t,zs,r)}}rn.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r?.({event:n}),!0)}}];const Bs={move:{name:"mousemove"},end:{name:"mouseup"}};var Ut;(function(e){e[e.RightClick=2]="RightClick"})(Ut||(Ut={}));class Ws extends nn{constructor(t){super(t,Bs,Pe(t.event.target))}}Ws.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===Ut.RightClick?!1:(r?.({event:n}),!0)}}];const Ot={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class $s extends nn{constructor(t){super(t,Ot)}static setup(){return window.addEventListener(Ot.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Ot.move.name,t)};function t(){}}}$s.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:o}=n;return o.length>1?!1:(r?.({event:n}),!0)}}];var He;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(He||(He={}));var mt;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(mt||(mt={}));function Us(e){let{acceleration:t,activator:n=He.Pointer,canScroll:r,draggingRect:o,enabled:s,interval:i=5,order:l=mt.TreeOrder,pointerCoordinates:d,scrollableAncestors:h,scrollableAncestorRects:f,delta:u,threshold:p}=e;const g=Ys({delta:u,disabled:!s}),[x,w]=ts(),m=c.useRef({x:0,y:0}),S=c.useRef({x:0,y:0}),C=c.useMemo(()=>{switch(n){case He.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case He.DraggableRect:return o}},[n,o,d]),v=c.useRef(null),b=c.useCallback(()=>{const N=v.current;if(!N)return;const E=m.current.x*S.current.x,j=m.current.y*S.current.y;N.scrollBy(E,j)},[]),R=c.useMemo(()=>l===mt.TreeOrder?[...h].reverse():h,[l,h]);c.useEffect(()=>{if(!s||!h.length||!C){w();return}for(const N of R){if(r?.(N)===!1)continue;const E=h.indexOf(N),j=f[E];if(!j)continue;const{direction:y,speed:D}=Is(N,j,C,t,p);for(const T of["x","y"])g[T][y[T]]||(D[T]=0,y[T]=0);if(D.x>0||D.y>0){w(),v.current=N,x(b,i),m.current=D,S.current=y;return}}m.current={x:0,y:0},S.current={x:0,y:0},w()},[t,b,r,w,s,i,JSON.stringify(C),JSON.stringify(g),x,h,R,f,JSON.stringify(p)])}const Hs={x:{[L.Backward]:!1,[L.Forward]:!1},y:{[L.Backward]:!1,[L.Forward]:!1}};function Ys(e){let{delta:t,disabled:n}=e;const r=Bt(t);return et(o=>{if(n||!r||!o)return Hs;const s={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[L.Backward]:o.x[L.Backward]||s.x===-1,[L.Forward]:o.x[L.Forward]||s.x===1},y:{[L.Backward]:o.y[L.Backward]||s.y===-1,[L.Forward]:o.y[L.Forward]||s.y===1}}},[n,t,r])}function Xs(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return et(o=>{var s;return t==null?null:(s=r??o)!=null?s:null},[r,t])}function Vs(e,t){return c.useMemo(()=>e.reduce((n,r)=>{const{sensor:o}=r,s=o.activators.map(i=>({eventName:i.eventName,handler:t(i.handler,r)}));return[...n,...s]},[]),[e,t])}var Ke;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Ke||(Ke={}));var Ht;(function(e){e.Optimized="optimized"})(Ht||(Ht={}));const jn=new Map;function Gs(e,t){let{dragging:n,dependencies:r,config:o}=t;const[s,i]=c.useState(null),{frequency:l,measure:d,strategy:h}=o,f=c.useRef(e),u=m(),p=Xe(u),g=c.useCallback(function(S){S===void 0&&(S=[]),!p.current&&i(C=>C===null?S:C.concat(S.filter(v=>!C.includes(v))))},[p]),x=c.useRef(null),w=et(S=>{if(u&&!n)return jn;if(!S||S===jn||f.current!==e||s!=null){const C=new Map;for(let v of e){if(!v)continue;if(s&&s.length>0&&!s.includes(v.id)&&v.rect.current){C.set(v.id,v.rect.current);continue}const b=v.node.current,R=b?new en(d(b),b):null;v.rect.current=R,R&&C.set(v.id,R)}return C}return S},[e,s,n,u,d]);return c.useEffect(()=>{f.current=e},[e]),c.useEffect(()=>{u||g()},[n,u]),c.useEffect(()=>{s&&s.length>0&&i(null)},[JSON.stringify(s)]),c.useEffect(()=>{u||typeof l!="number"||x.current!==null||(x.current=setTimeout(()=>{g(),x.current=null},l))},[l,u,g,...r]),{droppableRects:w,measureDroppableContainers:g,measuringScheduled:s!=null};function m(){switch(h){case Ke.Always:return!1;case Ke.BeforeDragging:return n;default:return!n}}}function Er(e,t){return et(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function Ks(e,t){return Er(e,t)}function qs(e){let{callback:t,disabled:n}=e;const r=Qt(t),o=c.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:s}=window;return new s(r)},[r,n]);return c.useEffect(()=>()=>o?.disconnect(),[o]),o}function Nt(e){let{callback:t,disabled:n}=e;const r=Qt(t),o=c.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:s}=window;return new s(r)},[n]);return c.useEffect(()=>()=>o?.disconnect(),[o]),o}function Js(e){return new en(ke(e),e)}function En(e,t,n){t===void 0&&(t=Js);const[r,o]=c.useState(null);function s(){o(d=>{if(!e)return null;if(e.isConnected===!1){var h;return(h=d??n)!=null?h:null}const f=t(e);return JSON.stringify(d)===JSON.stringify(f)?d:f})}const i=qs({callback(d){if(e)for(const h of d){const{type:f,target:u}=h;if(f==="childList"&&u instanceof HTMLElement&&u.contains(e)){s();break}}}}),l=Nt({callback:s});return se(()=>{s(),e?(l?.observe(e),i?.observe(document.body,{childList:!0,subtree:!0})):(l?.disconnect(),i?.disconnect())},[e]),r}function Qs(e){const t=Er(e);return xr(e,t)}const Dn=[];function Zs(e){const t=c.useRef(e),n=et(r=>e?r&&r!==Dn&&e&&t.current&&e.parentNode===t.current.parentNode?r:Rt(e):Dn,[e]);return c.useEffect(()=>{t.current=e},[e]),n}function ea(e){const[t,n]=c.useState(null),r=c.useRef(e),o=c.useCallback(s=>{const i=kt(s.target);i&&n(l=>l?(l.set(i,$t(i)),new Map(l)):null)},[]);return c.useEffect(()=>{const s=r.current;if(e!==s){i(s);const l=e.map(d=>{const h=kt(d);return h?(h.addEventListener("scroll",o,{passive:!0}),[h,$t(h)]):null}).filter(d=>d!=null);n(l.length?new Map(l):null),r.current=e}return()=>{i(e),i(s)};function i(l){l.forEach(d=>{const h=kt(d);h?.removeEventListener("scroll",o)})}},[o,e]),c.useMemo(()=>e.length?t?Array.from(t.values()).reduce((s,i)=>Ie(s,i),ee):Nr(e):ee,[e,t])}function Tn(e,t){t===void 0&&(t=[]);const n=c.useRef(null);return c.useEffect(()=>{n.current=null},t),c.useEffect(()=>{const r=e!==ee;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?Ve(e,n.current):ee}function ta(e){c.useEffect(()=>{if(!Ct)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n?.()}},e.map(t=>{let{sensor:n}=t;return n}))}function na(e,t){return c.useMemo(()=>e.reduce((n,r)=>{let{eventName:o,handler:s}=r;return n[o]=i=>{s(i,t)},n},{}),[e,t])}function Dr(e){return c.useMemo(()=>e?js(e):null,[e])}const In=[];function ra(e,t){t===void 0&&(t=ke);const[n]=e,r=Dr(n?W(n):null),[o,s]=c.useState(In);function i(){s(()=>e.length?e.map(d=>Cr(d)?r:new en(t(d),d)):In)}const l=Nt({callback:i});return se(()=>{l?.disconnect(),i(),e.forEach(d=>l?.observe(d))},[e]),o}function oa(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Ze(t)?t:e}function sa(e){let{measure:t}=e;const[n,r]=c.useState(null),o=c.useCallback(h=>{for(const{target:f}of h)if(Ze(f)){r(u=>{const p=t(f);return u?{...u,width:p.width,height:p.height}:p});break}},[t]),s=Nt({callback:o}),i=c.useCallback(h=>{const f=oa(h);s?.disconnect(),f&&s?.observe(f),r(f?t(f):null)},[t,s]),[l,d]=gt(i);return c.useMemo(()=>({nodeRef:l,rect:n,setRef:d}),[n,l,d])}const aa=[{sensor:rn,options:{}},{sensor:tn,options:{}}],ia={current:{}},ut={draggable:{measure:Sn},droppable:{measure:Sn,strategy:Ke.WhileDragging,frequency:Ht.Optimized},dragOverlay:{measure:ke}};class Ye extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const la={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Ye,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:vt},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:ut,measureDroppableContainers:vt,windowRect:null,measuringScheduled:!1},ca={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:vt,draggableNodes:new Map,over:null,measureDroppableContainers:vt},jt=c.createContext(ca),Tr=c.createContext(la);function da(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Ye}}}function ua(e,t){switch(t.type){case k.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case k.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case k.DragEnd:case k.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case k.RegisterDroppable:{const{element:n}=t,{id:r}=n,o=new Ye(e.droppable.containers);return o.set(r,n),{...e,droppable:{...e.droppable,containers:o}}}case k.SetDroppableDisabled:{const{id:n,key:r,disabled:o}=t,s=e.droppable.containers.get(n);if(!s||r!==s.key)return e;const i=new Ye(e.droppable.containers);return i.set(n,{...s,disabled:o}),{...e,droppable:{...e.droppable,containers:i}}}case k.UnregisterDroppable:{const{id:n,key:r}=t,o=e.droppable.containers.get(n);if(!o||r!==o.key)return e;const s=new Ye(e.droppable.containers);return s.delete(n),{...e,droppable:{...e.droppable,containers:s}}}default:return e}}function fa(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:o}=c.useContext(jt),s=Bt(r),i=Bt(n?.id);return c.useEffect(()=>{if(!t&&!r&&s&&i!=null){if(!Zt(s)||document.activeElement===s.target)return;const l=o.get(i);if(!l)return;const{activatorNode:d,node:h}=l;if(!d.current&&!h.current)return;requestAnimationFrame(()=>{for(const f of[d.current,h.current]){if(!f)continue;const u=os(f);if(u){u.focus();break}}})}},[r,t,o,i,s]),null}function ha(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((o,s)=>s({transform:o,...r}),n):n}function pa(e){return c.useMemo(()=>({draggable:{...ut.draggable,...e?.draggable},droppable:{...ut.droppable,...e?.droppable},dragOverlay:{...ut.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function ga(e){let{activeNode:t,measure:n,initialRect:r,config:o=!0}=e;const s=c.useRef(!1),{x:i,y:l}=typeof o=="boolean"?{x:o,y:o}:o;se(()=>{if(!i&&!l||!t){s.current=!1;return}if(s.current||!r)return;const h=t?.node.current;if(!h||h.isConnected===!1)return;const f=n(h),u=xr(f,r);if(i||(u.x=0),l||(u.y=0),s.current=!0,Math.abs(u.x)>0||Math.abs(u.y)>0){const p=wr(h);p&&p.scrollBy({top:u.y,left:u.x})}},[t,i,l,r,n])}const Ir=c.createContext({...ee,scaleX:1,scaleY:1});var xe;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(xe||(xe={}));const va=c.memo(function(t){var n,r,o,s;let{id:i,accessibility:l,autoScroll:d=!0,children:h,sensors:f=aa,collisionDetection:u=xs,measuring:p,modifiers:g,...x}=t;const w=c.useReducer(ua,void 0,da),[m,S]=w,[C,v]=ds(),[b,R]=c.useState(xe.Uninitialized),N=b===xe.Initialized,{draggable:{active:E,nodes:j,translate:y},droppable:{containers:D}}=m,T=E!=null?j.get(E):null,z=c.useRef({initial:null,translated:null}),$=c.useMemo(()=>{var F;return E!=null?{id:E,data:(F=T?.data)!=null?F:ia,rect:z}:null},[E,T]),Z=c.useRef(null),[ye,V]=c.useState(null),[U,nt]=c.useState(null),ie=Xe(x,Object.values(x)),Le=tt("DndDescribedBy",i),rt=c.useMemo(()=>D.getEnabled(),[D]),B=pa(p),{droppableRects:le,measureDroppableContainers:Se,measuringScheduled:Oe}=Gs(rt,{dragging:N,dependencies:[y.x,y.y],config:B.droppable}),G=Xs(j,E),ot=c.useMemo(()=>U?Wt(U):null,[U]),he=Hr(),ce=Ks(G,B.draggable.measure);ga({activeNode:E!=null?j.get(E):null,config:he.layoutShiftCompensation,initialRect:ce,measure:B.draggable.measure});const M=En(G,B.draggable.measure,ce),Fe=En(G?G.parentElement:null),te=c.useRef({activatorEvent:null,active:null,activeNode:G,collisionRect:null,collisions:null,droppableRects:le,draggableNodes:j,draggingNode:null,draggingNodeRect:null,droppableContainers:D,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Re=D.getNodeFor((n=te.current.over)==null?void 0:n.id),de=sa({measure:B.dragOverlay.measure}),Ne=(r=de.nodeRef.current)!=null?r:G,je=N?(o=de.rect)!=null?o:M:null,sn=!!(de.nodeRef.current&&de.rect),an=Qs(sn?null:M),Et=Dr(Ne?W(Ne):null),pe=Zs(N?Re??G:null),st=ra(pe),at=ha(g,{transform:{x:y.x-an.x,y:y.y-an.y,scaleX:1,scaleY:1},activatorEvent:U,active:$,activeNodeRect:M,containerNodeRect:Fe,draggingNodeRect:je,over:te.current.over,overlayNodeRect:de.rect,scrollableAncestors:pe,scrollableAncestorRects:st,windowRect:Et}),ln=ot?Ie(ot,y):null,cn=ea(pe),Fr=Tn(cn),_r=Tn(cn,[M]),Ee=Ie(at,Fr),De=je?Ss(je,at):null,_e=$&&De?u({active:$,collisionRect:De,droppableRects:le,droppableContainers:rt,pointerCoordinates:ln}):null,dn=br(_e,"id"),[ge,un]=c.useState(null),zr=sn?at:Ie(at,_r),Br=ws(zr,(s=ge?.rect)!=null?s:null,M),Dt=c.useRef(null),fn=c.useCallback((F,H)=>{let{sensor:Y,options:ve}=H;if(Z.current==null)return;const K=j.get(Z.current);if(!K)return;const X=F.nativeEvent,ne=new Y({active:Z.current,activeNode:K,event:X,options:ve,context:te,onAbort(O){if(!j.get(O))return;const{onDragAbort:re}=ie.current,ue={id:O};re?.(ue),C({type:"onDragAbort",event:ue})},onPending(O,me,re,ue){if(!j.get(O))return;const{onDragPending:Be}=ie.current,be={id:O,constraint:me,initialCoordinates:re,offset:ue};Be?.(be),C({type:"onDragPending",event:be})},onStart(O){const me=Z.current;if(me==null)return;const re=j.get(me);if(!re)return;const{onDragStart:ue}=ie.current,ze={activatorEvent:X,active:{id:me,data:re.data,rect:z}};$e.unstable_batchedUpdates(()=>{ue?.(ze),R(xe.Initializing),S({type:k.DragStart,initialCoordinates:O,active:me}),C({type:"onDragStart",event:ze}),V(Dt.current),nt(X)})},onMove(O){S({type:k.DragMove,coordinates:O})},onEnd:Te(k.DragEnd),onCancel:Te(k.DragCancel)});Dt.current=ne;function Te(O){return async function(){const{active:re,collisions:ue,over:ze,scrollAdjustedTranslate:Be}=te.current;let be=null;if(re&&Be){const{cancelDrop:We}=ie.current;be={activatorEvent:X,active:re,collisions:ue,delta:Be,over:ze},O===k.DragEnd&&typeof We=="function"&&await Promise.resolve(We(be))&&(O=k.DragCancel)}Z.current=null,$e.unstable_batchedUpdates(()=>{S({type:O}),R(xe.Uninitialized),un(null),V(null),nt(null),Dt.current=null;const We=O===k.DragEnd?"onDragEnd":"onDragCancel";if(be){const Tt=ie.current[We];Tt?.(be),C({type:We,event:be})}})}}},[j]),Wr=c.useCallback((F,H)=>(Y,ve)=>{const K=Y.nativeEvent,X=j.get(ve);if(Z.current!==null||!X||K.dndKit||K.defaultPrevented)return;const ne={active:X};F(Y,H.options,ne)===!0&&(K.dndKit={capturedBy:H.sensor},Z.current=ve,fn(Y,H))},[j,fn]),hn=Vs(f,Wr);ta(f),se(()=>{M&&b===xe.Initializing&&R(xe.Initialized)},[M,b]),c.useEffect(()=>{const{onDragMove:F}=ie.current,{active:H,activatorEvent:Y,collisions:ve,over:K}=te.current;if(!H||!Y)return;const X={active:H,activatorEvent:Y,collisions:ve,delta:{x:Ee.x,y:Ee.y},over:K};$e.unstable_batchedUpdates(()=>{F?.(X),C({type:"onDragMove",event:X})})},[Ee.x,Ee.y]),c.useEffect(()=>{const{active:F,activatorEvent:H,collisions:Y,droppableContainers:ve,scrollAdjustedTranslate:K}=te.current;if(!F||Z.current==null||!H||!K)return;const{onDragOver:X}=ie.current,ne=ve.get(dn),Te=ne&&ne.rect.current?{id:ne.id,rect:ne.rect.current,data:ne.data,disabled:ne.disabled}:null,O={active:F,activatorEvent:H,collisions:Y,delta:{x:K.x,y:K.y},over:Te};$e.unstable_batchedUpdates(()=>{un(Te),X?.(O),C({type:"onDragOver",event:O})})},[dn]),se(()=>{te.current={activatorEvent:U,active:$,activeNode:G,collisionRect:De,collisions:_e,droppableRects:le,draggableNodes:j,draggingNode:Ne,draggingNodeRect:je,droppableContainers:D,over:ge,scrollableAncestors:pe,scrollAdjustedTranslate:Ee},z.current={initial:je,translated:De}},[$,G,_e,De,j,Ne,je,le,D,ge,pe,Ee]),Us({...he,delta:y,draggingRect:De,pointerCoordinates:ln,scrollableAncestors:pe,scrollableAncestorRects:st});const $r=c.useMemo(()=>({active:$,activeNode:G,activeNodeRect:M,activatorEvent:U,collisions:_e,containerNodeRect:Fe,dragOverlay:de,draggableNodes:j,droppableContainers:D,droppableRects:le,over:ge,measureDroppableContainers:Se,scrollableAncestors:pe,scrollableAncestorRects:st,measuringConfiguration:B,measuringScheduled:Oe,windowRect:Et}),[$,G,M,U,_e,Fe,de,j,D,le,ge,Se,pe,st,B,Oe,Et]),Ur=c.useMemo(()=>({activatorEvent:U,activators:hn,active:$,activeNodeRect:M,ariaDescribedById:{draggable:Le},dispatch:S,draggableNodes:j,over:ge,measureDroppableContainers:Se}),[U,hn,$,M,S,Le,j,ge,Se]);return P.createElement(gr.Provider,{value:v},P.createElement(jt.Provider,{value:Ur},P.createElement(Tr.Provider,{value:$r},P.createElement(Ir.Provider,{value:Br},h)),P.createElement(fa,{disabled:l?.restoreFocus===!1})),P.createElement(hs,{...l,hiddenTextDescribedById:Le}));function Hr(){const F=ye?.autoScrollEnabled===!1,H=typeof d=="object"?d.enabled===!1:d===!1,Y=N&&!F&&!H;return typeof d=="object"?{...d,enabled:Y}:{enabled:Y}}}),ma=c.createContext(null),An="button",ba="Draggable";function xa(e){let{id:t,data:n,disabled:r=!1,attributes:o}=e;const s=tt(ba),{activators:i,activatorEvent:l,active:d,activeNodeRect:h,ariaDescribedById:f,draggableNodes:u,over:p}=c.useContext(jt),{role:g=An,roleDescription:x="draggable",tabIndex:w=0}=o??{},m=d?.id===t,S=c.useContext(m?Ir:ma),[C,v]=gt(),[b,R]=gt(),N=na(i,t),E=Xe(n);se(()=>(u.set(t,{id:t,key:s,node:C,activatorNode:b,data:E}),()=>{const y=u.get(t);y&&y.key===s&&u.delete(t)}),[u,t]);const j=c.useMemo(()=>({role:g,tabIndex:w,"aria-disabled":r,"aria-pressed":m&&g===An?!0:void 0,"aria-roledescription":x,"aria-describedby":f.draggable}),[r,g,w,m,x,f.draggable]);return{active:d,activatorEvent:l,activeNodeRect:h,attributes:j,isDragging:m,listeners:r?void 0:N,node:C,over:p,setNodeRef:v,setActivatorNodeRef:R,transform:S}}function wa(){return c.useContext(Tr)}const ya="Droppable",Sa={timeout:25};function Ca(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:o}=e;const s=tt(ya),{active:i,dispatch:l,over:d,measureDroppableContainers:h}=c.useContext(jt),f=c.useRef({disabled:n}),u=c.useRef(!1),p=c.useRef(null),g=c.useRef(null),{disabled:x,updateMeasurementsFor:w,timeout:m}={...Sa,...o},S=Xe(w??r),C=c.useCallback(()=>{if(!u.current){u.current=!0;return}g.current!=null&&clearTimeout(g.current),g.current=setTimeout(()=>{h(Array.isArray(S.current)?S.current:[S.current]),g.current=null},m)},[m]),v=Nt({callback:C,disabled:x||!i}),b=c.useCallback((j,y)=>{v&&(y&&(v.unobserve(y),u.current=!1),j&&v.observe(j))},[v]),[R,N]=gt(b),E=Xe(t);return c.useEffect(()=>{!v||!R.current||(v.disconnect(),u.current=!1,v.observe(R.current))},[R,v]),c.useEffect(()=>(l({type:k.RegisterDroppable,element:{id:r,key:s,disabled:n,node:R,rect:p,data:E}}),()=>l({type:k.UnregisterDroppable,key:s,id:r})),[r]),c.useEffect(()=>{n!==f.current.disabled&&(l({type:k.SetDroppableDisabled,id:r,key:s,disabled:n}),f.current.disabled=n)},[r,s,n,l]),{active:i,rect:p,isOver:d?.id===r,node:R,over:d,setNodeRef:N}}function on(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function Ra(e,t){return e.reduce((n,r,o)=>{const s=t.get(r);return s&&(n[o]=s),n},Array(e.length))}function ct(e){return e!==null&&e>=0}function Na(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function ja(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const Ar=e=>{let{rects:t,activeIndex:n,overIndex:r,index:o}=e;const s=on(t,r,n),i=t[o],l=s[o];return!l||!i?null:{x:l.left-i.left,y:l.top-i.top,scaleX:l.width/i.width,scaleY:l.height/i.height}},dt={scaleX:1,scaleY:1},Ea=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:o,rects:s,overIndex:i}=e;const l=(t=s[n])!=null?t:r;if(!l)return null;if(o===n){const h=s[i];return h?{x:0,y:n<i?h.top+h.height-(l.top+l.height):h.top-l.top,...dt}:null}const d=Da(s,o,n);return o>n&&o<=i?{x:0,y:-l.height-d,...dt}:o<n&&o>=i?{x:0,y:l.height+d,...dt}:{x:0,y:0,...dt}};function Da(e,t,n){const r=e[t],o=e[t-1],s=e[t+1];return r?n<t?o?r.top-(o.top+o.height):s?s.top-(r.top+r.height):0:s?s.top-(r.top+r.height):o?r.top-(o.top+o.height):0:0}const Mr="Sortable",Pr=P.createContext({activeIndex:-1,containerId:Mr,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Ar,disabled:{draggable:!1,droppable:!1}});function Ta(e){let{children:t,id:n,items:r,strategy:o=Ar,disabled:s=!1}=e;const{active:i,dragOverlay:l,droppableRects:d,over:h,measureDroppableContainers:f}=wa(),u=tt(Mr,n),p=l.rect!==null,g=c.useMemo(()=>r.map(N=>typeof N=="object"&&"id"in N?N.id:N),[r]),x=i!=null,w=i?g.indexOf(i.id):-1,m=h?g.indexOf(h.id):-1,S=c.useRef(g),C=!Na(g,S.current),v=m!==-1&&w===-1||C,b=ja(s);se(()=>{C&&x&&f(g)},[C,g,x,f]),c.useEffect(()=>{S.current=g},[g]);const R=c.useMemo(()=>({activeIndex:w,containerId:u,disabled:b,disableTransforms:v,items:g,overIndex:m,useDragOverlay:p,sortedRects:Ra(g,d),strategy:o}),[w,u,b.draggable,b.droppable,v,g,m,d,p,o]);return P.createElement(Pr.Provider,{value:R},t)}const Ia=e=>{let{id:t,items:n,activeIndex:r,overIndex:o}=e;return on(n,r,o).indexOf(t)},Aa=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:o,items:s,newIndex:i,previousItems:l,previousContainerId:d,transition:h}=e;return!h||!r||l!==s&&o===i?!1:n?!0:i!==o&&t===d},Ma={duration:200,easing:"ease"},kr="transform",Pa=Ge.Transition.toString({property:kr,duration:0,easing:"linear"}),ka={roleDescription:"sortable"};function La(e){let{disabled:t,index:n,node:r,rect:o}=e;const[s,i]=c.useState(null),l=c.useRef(n);return se(()=>{if(!t&&n!==l.current&&r.current){const d=o.current;if(d){const h=ke(r.current,{ignoreTransform:!0}),f={x:d.left-h.left,y:d.top-h.top,scaleX:d.width/h.width,scaleY:d.height/h.height};(f.x||f.y)&&i(f)}}n!==l.current&&(l.current=n)},[t,n,r,o]),c.useEffect(()=>{s&&i(null)},[s]),s}function Oa(e){let{animateLayoutChanges:t=Aa,attributes:n,disabled:r,data:o,getNewIndex:s=Ia,id:i,strategy:l,resizeObserverConfig:d,transition:h=Ma}=e;const{items:f,containerId:u,activeIndex:p,disabled:g,disableTransforms:x,sortedRects:w,overIndex:m,useDragOverlay:S,strategy:C}=c.useContext(Pr),v=Fa(r,g),b=f.indexOf(i),R=c.useMemo(()=>({sortable:{containerId:u,index:b,items:f},...o}),[u,o,b,f]),N=c.useMemo(()=>f.slice(f.indexOf(i)),[f,i]),{rect:E,node:j,isOver:y,setNodeRef:D}=Ca({id:i,data:R,disabled:v.droppable,resizeObserverConfig:{updateMeasurementsFor:N,...d}}),{active:T,activatorEvent:z,activeNodeRect:$,attributes:Z,setNodeRef:ye,listeners:V,isDragging:U,over:nt,setActivatorNodeRef:ie,transform:Le}=xa({id:i,data:R,attributes:{...ka,...n},disabled:v.draggable}),rt=es(D,ye),B=!!T,le=B&&!x&&ct(p)&&ct(m),Se=!S&&U,Oe=Se&&le?Le:null,ot=le?Oe??(l??C)({rects:w,activeNodeRect:$,activeIndex:p,overIndex:m,index:b}):null,he=ct(p)&&ct(m)?s({id:i,items:f,activeIndex:p,overIndex:m}):b,ce=T?.id,M=c.useRef({activeId:ce,items:f,newIndex:he,containerId:u}),Fe=f!==M.current.items,te=t({active:T,containerId:u,isDragging:U,isSorting:B,id:i,index:b,items:f,newIndex:M.current.newIndex,previousItems:M.current.items,previousContainerId:M.current.containerId,transition:h,wasDragging:M.current.activeId!=null}),Re=La({disabled:!te,index:b,node:j,rect:E});return c.useEffect(()=>{B&&M.current.newIndex!==he&&(M.current.newIndex=he),u!==M.current.containerId&&(M.current.containerId=u),f!==M.current.items&&(M.current.items=f)},[B,he,u,f]),c.useEffect(()=>{if(ce===M.current.activeId)return;if(ce!=null&&M.current.activeId==null){M.current.activeId=ce;return}const Ne=setTimeout(()=>{M.current.activeId=ce},50);return()=>clearTimeout(Ne)},[ce]),{active:T,activeIndex:p,attributes:Z,data:R,rect:E,index:b,newIndex:he,items:f,isOver:y,isSorting:B,isDragging:U,listeners:V,node:j,overIndex:m,over:nt,setNodeRef:rt,setActivatorNodeRef:ie,setDroppableNodeRef:D,setDraggableNodeRef:ye,transform:Re??ot,transition:de()};function de(){if(Re||Fe&&M.current.newIndex===b)return Pa;if(!(Se&&!Zt(z)||!h)&&(B||te))return Ge.Transition.toString({...h,property:kr})}}function Fa(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e?.draggable)!=null?n:t.draggable,droppable:(r=e?.droppable)!=null?r:t.droppable}}function bt(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const _a=[I.Down,I.Right,I.Up,I.Left],za=(e,t)=>{let{context:{active:n,collisionRect:r,droppableRects:o,droppableContainers:s,over:i,scrollableAncestors:l}}=t;if(_a.includes(e.code)){if(e.preventDefault(),!n||!r)return;const d=[];s.getEnabled().forEach(u=>{if(!u||u!=null&&u.disabled)return;const p=o.get(u.id);if(p)switch(e.code){case I.Down:r.top<p.top&&d.push(u);break;case I.Up:r.top>p.top&&d.push(u);break;case I.Left:r.left>p.left&&d.push(u);break;case I.Right:r.left<p.left&&d.push(u);break}});const h=ms({collisionRect:r,droppableRects:o,droppableContainers:d});let f=br(h,"id");if(f===i?.id&&h.length>1&&(f=h[1].id),f!=null){const u=s.get(n.id),p=s.get(f),g=p?o.get(p.id):null,x=p?.node.current;if(x&&g&&u&&p){const m=Rt(x).some((N,E)=>l[E]!==N),S=Lr(u,p),C=Ba(u,p),v=m||!S?{x:0,y:0}:{x:C?r.width-g.width:0,y:C?r.height-g.height:0},b={x:g.left,y:g.top};return v.x&&v.y?b:Ve(b,v)}}}};function Lr(e,t){return!bt(e)||!bt(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function Ba(e,t){return!bt(e)||!bt(t)||!Lr(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wa=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),$a=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),Mn=e=>{const t=$a(e);return t.charAt(0).toUpperCase()+t.slice(1)},Or=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),Ua=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ha={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ya=c.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:o="",children:s,iconNode:i,...l},d)=>c.createElement("svg",{ref:d,...Ha,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:Or("lucide",o),...!s&&!Ua(l)&&{"aria-hidden":"true"},...l},[...i.map(([h,f])=>c.createElement(h,f)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xa=(e,t)=>{const n=c.forwardRef(({className:r,...o},s)=>c.createElement(Ya,{ref:s,iconNode:t,className:Or(`lucide-${Wa(Mn(e))}`,`lucide-${e}`,r),...o}));return n.displayName=Mn(e),n};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Va=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ga=Xa("x",Va);function Ka({...e}){return a.jsx(Gr,{"data-slot":"dialog",...e})}function qa({...e}){return a.jsx(Qr,{"data-slot":"dialog-portal",...e})}function Ja({className:e,...t}){return a.jsx(Zr,{"data-slot":"dialog-overlay",className:A("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function Qa({className:e,children:t,showCloseButton:n=!0,...r}){return a.jsxs(qa,{"data-slot":"dialog-portal",children:[a.jsx(Ja,{}),a.jsxs(Kr,{"data-slot":"dialog-content",className:A("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...r,children:[t,n&&a.jsxs(qr,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[a.jsx(Ga,{}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function Za({className:e,...t}){return a.jsx("div",{"data-slot":"dialog-header",className:A("flex flex-col gap-2 text-center sm:text-left",e),...t})}function ei({className:e,...t}){return a.jsx("div",{"data-slot":"dialog-footer",className:A("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function ti({className:e,...t}){return a.jsx(Jr,{"data-slot":"dialog-title",className:A("text-lg leading-none font-semibold",e),...t})}function ni({id:e,index:t,participantName:n,position:r,points:o,positionLabel:s,hasPointsSystem:i,onMoveUp:l,onMoveDown:d,isFirst:h,isLast:f,t:u}){const{attributes:p,listeners:g,setNodeRef:x,transform:w,transition:m,isDragging:S}=Oa({id:e}),C={transform:Ge.Transform.toString(w),transition:m,opacity:S?.5:1};return a.jsxs("div",{ref:x,style:C,className:`flex items-center gap-2 p-3 bg-gray-50 rounded-lg border border-gray-200 ${S?"shadow-lg z-50":""}`,children:[a.jsx("div",{...p,...g,className:"flex-shrink-0 cursor-grab active:cursor-grabbing touch-none","aria-label":"Drag to reorder",children:a.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8h16M4 16h16"})})}),a.jsxs("div",{className:"flex-shrink-0 w-12 text-center",children:[r===1&&a.jsx("span",{className:"text-2xl",children:"ðŸ¥‡"}),r===2&&a.jsx("span",{className:"text-2xl",children:"ðŸ¥ˆ"}),r===3&&a.jsx("span",{className:"text-2xl",children:"ðŸ¥‰"}),r>3&&a.jsx("span",{className:"text-lg font-semibold text-gray-600",children:r})]}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-medium text-gray-900",children:n}),a.jsxs("div",{className:"text-xs text-gray-500",children:[s,i&&a.jsx("span",{className:"ml-2 text-blue-600 font-medium",children:u("view.placementPoints",{points:o})})]})]}),a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx(Ce,{variant:"ghost",size:"sm",onClick:l,disabled:h,className:"h-6 w-6 p-0",type:"button",children:a.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})}),a.jsx(Ce,{variant:"ghost",size:"sm",onClick:d,disabled:f,className:"h-6 w-6 p-0",type:"button",children:a.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]})}function ri({match:e,participants:t,isMultiPlayer:n,pointsSystem:r,onSave:o,onCancel:s}){const{t:i}=Je(),[l,d]=c.useState([]),h=ps(xn(rn,{activationConstraint:{distance:8}}),xn(tn,{coordinateGetter:za}));if(c.useEffect(()=>{e&&d(e.participantIds)},[e]),!e)return null;const f=v=>{const{active:b,over:R}=v;R&&b.id!==R.id&&d(N=>{const E=N.indexOf(b.id),j=N.indexOf(R.id);return on(N,E,j)})},u=v=>t.find(R=>R.id===v)?.name||"Unknown",p=v=>v===1?i("view.first"):v===2?i("view.second"):v===3?i("view.third"):v===4?i("view.fourth"):`${v}${g(v)}`,g=v=>{const b=["th","st","nd","rd"],R=v%100;return b[(R-20)%10]||b[R]||b[0]},x=v=>{if(!r)return 0;try{return no(r,v,e.participantIds.length)}catch{return 0}},w=v=>{if(v===0)return;const b=[...l];[b[v-1],b[v]]=[b[v],b[v-1]],d(b)},m=v=>{if(v===l.length-1)return;const b=[...l];[b[v],b[v+1]]=[b[v+1],b[v]],d(b)},S=()=>{if(n){const v={rankings:l.map((b,R)=>({participantId:b,position:R+1}))};o(e.id,v)}else{const v=l[0],b=l[1],R={winnerId:v,loserId:b};o(e.id,R)}},C=v=>{const b=e.participantIds.find(N=>N!==v),R={winnerId:v,loserId:b};o(e.id,R)};return a.jsx(Ka,{open:!!e,onOpenChange:s,children:a.jsxs(Qa,{className:"sm:max-w-md",children:[a.jsx(Za,{children:a.jsx(ti,{children:i(n?"view.recordRankings":"view.recordResult")})}),!n&&a.jsxs("div",{className:"space-y-3",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-4",children:i("view.selectWinner")}),e.participantIds.map(v=>a.jsx(Ce,{variant:"outline",onClick:()=>C(v),className:"w-full h-auto p-4 justify-start hover:border-green-500 hover:bg-green-50",children:a.jsxs("div",{className:"flex items-center w-full",children:[a.jsx("span",{className:"font-medium text-gray-900",children:u(v)}),a.jsx("span",{className:"text-sm text-gray-500 ml-2",children:i("common.wins")})]})},v))]}),n&&a.jsxs("div",{className:"space-y-4",children:[a.jsx("p",{className:"text-sm text-gray-600",children:i("view.dragToReorder")}),a.jsx(va,{sensors:h,collisionDetection:vs,onDragEnd:f,children:a.jsx(Ta,{items:l,strategy:Ea,children:a.jsx("div",{className:"space-y-2",children:l.map((v,b)=>{const R=b+1,N=x(R),E=p(R);return a.jsx(ni,{id:v,index:b,participantName:u(v),position:R,points:N,positionLabel:E,hasPointsSystem:!!r,onMoveUp:()=>w(b),onMoveDown:()=>m(b),isFirst:b===0,isLast:b===l.length-1,t:i},v)})})})})]}),a.jsxs(ei,{className:"flex gap-2",children:[a.jsx(Ce,{variant:"outline",onClick:s,children:i("common.cancel")}),n&&a.jsx(Ce,{onClick:S,className:"bg-green-600 hover:bg-green-700",children:i("view.saveResults")})]})]})})}function ii({tournamentId:e,onBack:t}){const{t:n}=Je(),[r,o]=c.useState(null),[s,i]=c.useState(null),[l,d]=c.useState([]),[h,f]=c.useState([]),[u,p]=c.useState(null),[g,x]=c.useState(!0),[w,m]=c.useState(null);c.useEffect(()=>{try{const y=eo(e);if(!y){m(n("view.tournamentNotFound"));return}const D=ro(y);o(D),i(y),d(D.getCurrentMatches()),f(D.getStandings()),x(!1)}catch(y){m(y instanceof Error?y.message:n("view.loadError")),x(!1)}},[e,n]);const S=()=>{if(!r)return;d(r.getCurrentMatches()),f(r.getStandings());const y=r.export();to(y),i(y)},C=(y,D)=>{if(r)try{r.recordMatchResult(y,D),S(),p(null)}catch(T){alert(T instanceof Error?T.message:n("view.resultError"))}},v=y=>{y.status!=="completed"&&p(y)},b=y=>y.participantIds.length>2,R=()=>s?s.options?.pointsSystem:void 0,N=y=>y==="single-elimination"||y==="double-elimination",E=y=>y==="round-robin"||y==="swiss"||y==="free-for-all";if(g)return a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),a.jsx("p",{className:"mt-2 text-sm text-gray-600",children:n("view.loadingTournament")})]})});if(w||!r)return a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-red-600",children:w||n("view.tournamentNotFound")}),a.jsx(Ce,{onClick:t,className:"mt-4",children:n("view.backToDashboard")})]})});const j=y=>({"single-elimination":n("tournamentTypes.singleElimination"),"double-elimination":n("tournamentTypes.doubleElimination"),"round-robin":n("tournamentTypes.roundRobin"),swiss:n("tournamentTypes.swiss"),"free-for-all":n("tournamentTypes.freeForAll")})[y]||y;return a.jsx("div",{className:"min-h-screen bg-gray-50 p-4 md:p-8",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs(Ce,{variant:"ghost",onClick:t,className:"mb-4 -ml-4",children:[a.jsx("svg",{className:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),n("view.backToDashboard")]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:r.getName()}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:j(r.getType())})]}),a.jsx("div",{children:r.isComplete()?a.jsx("span",{className:"px-3 py-1 text-sm font-medium rounded-full bg-green-100 text-green-800",children:n("status.completed")}):a.jsx("span",{className:"px-3 py-1 text-sm font-medium rounded-full bg-blue-100 text-blue-800",children:n("status.inProgress")})})]})]}),a.jsxs(No,{defaultValue:N(r.getType())?"bracket":"matches",className:"w-full",children:[a.jsxs(jo,{className:"grid w-full max-w-md",style:{gridTemplateColumns:N(r.getType())?"1fr 1fr 1fr":"1fr 1fr"},children:[N(r.getType())&&a.jsx(At,{value:"bracket",children:n("view.bracket")||"Bracket"}),a.jsx(At,{value:"matches",children:n("view.matches")||"Matches"}),a.jsx(At,{value:"standings",children:n("view.standings")})]}),N(r.getType())&&a.jsx(Mt,{value:"bracket",className:"mt-6",children:a.jsxs("div",{className:"bg-white shadow rounded-lg",children:[r.getType()==="single-elimination"&&s?.type==="single-elimination"&&a.jsx(Jo,{bracket:s.bracket,thirdPlaceMatch:s.thirdPlaceMatch,participants:r.getParticipants(),onMatchClick:v}),r.getType()==="double-elimination"&&s?.type==="double-elimination"&&a.jsx(Qo,{winnersBracket:s.winnersBracket,losersBracket:s.losersBracket,grandFinal:s.grandFinal,grandFinalReset:s.grandFinalReset,participants:r.getParticipants(),onMatchClick:v})]})}),a.jsx(Mt,{value:"matches",className:"mt-6",children:a.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:n("view.currentMatches")}),a.jsx(Zo,{matches:l,participants:r.getParticipants(),onMatchClick:v,groupByRounds:E(r.getType()),showRoundHeaders:E(r.getType())})]})}),a.jsx(Mt,{value:"standings",className:"mt-6",children:a.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:n("view.standings")}),a.jsx("div",{className:"rounded-md border",children:a.jsxs(Eo,{children:[a.jsx(Do,{children:a.jsxs(gn,{children:[a.jsx(it,{className:"w-20",children:n("view.rank")}),a.jsx(it,{children:n("view.participant")}),a.jsx(it,{className:"w-32",children:n("view.wlt")}),h.some(y=>y.points!==void 0)&&a.jsx(it,{className:"w-24 text-right",children:n("view.points")})]})}),a.jsx(To,{children:h.map(y=>a.jsxs(gn,{children:[a.jsx(lt,{className:"font-medium",children:y.rank||"-"}),a.jsxs(lt,{children:[y.participantName,y.isEliminated&&a.jsx("span",{className:"ml-2 text-xs text-red-600",children:n("view.eliminated")})]}),a.jsxs(lt,{children:[y.wins,"-",y.losses,"-",y.ties]}),h.some(D=>D.points!==void 0)&&a.jsx(lt,{className:"text-right",children:y.points||0})]},y.participantId))})]})})]})})]}),a.jsx(ri,{match:u,participants:r.getParticipants(),isMultiPlayer:u?b(u):!1,pointsSystem:R(),onSave:C,onCancel:()=>p(null)})]})})}export{ii as default};
