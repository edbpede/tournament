import{u as f,j as e,L as A,g as T,B as l,A as D,a as L,b as S,c as E,d as I,e as B,f as O,h as F,i as R,k as z,l as H,s as M}from"./TournamentApp.BxTph6Rr.js";import{r as j}from"./index.DXA_EoSs.js";import{r as V}from"./factory.Cj9G9gH0.js";function W(){const{i18n:r,t:o}=f(),d=[{code:"da",name:o("language.danish")},{code:"en",name:o("language.english")}],c=n=>{r.changeLanguage(n),localStorage.setItem(A,n)};return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("label",{htmlFor:"language-select",className:"text-sm font-medium text-gray-700",children:[o("language.label"),":"]}),e.jsx("select",{id:"language-select",value:r.language,onChange:n=>c(n.target.value),className:"px-3 py-1.5 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white",children:d.map(n=>e.jsx("option",{value:n.code,children:n.name},n.code))})]})}function P({tournaments:r,onCreateNew:o,onViewTournament:d,onDeleteTournament:c,onRefresh:n}){const{t}=f(),[h,x]=j.useState(!1),[i,m]=j.useState({isOpen:!1,tournamentId:null,tournamentName:null}),b=async s=>{const a=s.target.files?.[0];if(!a)return;x(!0),await R(a)?(alert(t("dashboard.importSuccess")),n()):alert(t("dashboard.importError")),x(!1),s.target.value=""},v=s=>{try{z(s)}catch(a){alert(t("dashboard.exportError")),console.error(a)}},N=(s,a)=>{m({isOpen:!0,tournamentId:s,tournamentName:a})},y=()=>{if(i.tournamentId)try{const s=H(i.tournamentId);if(!s){alert(t("dashboard.resetError"));return}const a=V(s);a.reset();const p=a.export();M(p),m({isOpen:!1,tournamentId:null,tournamentName:null}),n()}catch(s){alert(t("dashboard.resetError")),console.error(s)}},u=()=>{m({isOpen:!1,tournamentId:null,tournamentName:null})},g=s=>{const a=new Date(s);return a.toLocaleDateString()+" "+a.toLocaleTimeString()},w=s=>s.completed?e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800",children:t("status.completed")}):s.started?e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800",children:t("status.inProgress")}):e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-800",children:t("status.notStarted")}),k=s=>({"single-elimination":t("tournamentTypes.singleElimination"),"double-elimination":t("tournamentTypes.doubleElimination"),"round-robin":t("tournamentTypes.roundRobin"),swiss:t("tournamentTypes.swiss"),"free-for-all":t("tournamentTypes.freeForAll")})[s]||s,C=T();return e.jsx("div",{className:"min-h-screen bg-gray-50 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:t("dashboard.title")}),e.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:[t(`dashboard.tournamentCount_${r.length===1?"one":"other"}`,{count:r.length})," • ",C.estimatedSize]})]}),e.jsxs("div",{className:"mt-4 md:mt-0 flex flex-wrap gap-2 items-center",children:[e.jsx(W,{}),e.jsx(l,{variant:"outline",asChild:!0,children:e.jsxs("label",{className:"cursor-pointer",children:[t(h?"common.importing":"common.import"),e.jsx("input",{type:"file",accept:".json",onChange:b,disabled:h,className:"hidden"})]})}),e.jsx(l,{onClick:o,children:t("dashboard.newTournament")})]})]}),r.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:t("dashboard.noTournaments")}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:t("dashboard.noTournamentsDescription")}),e.jsx("div",{className:"mt-6",children:e.jsx(l,{onClick:o,children:t("dashboard.newTournament")})})]}):e.jsx("div",{className:"bg-white shadow overflow-hidden rounded-lg",children:e.jsx("ul",{className:"divide-y divide-gray-200",children:r.map(s=>e.jsx("li",{className:"hover:bg-gray-50 transition-colors",children:e.jsx("div",{className:"px-4 py-4 sm:px-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("button",{onClick:()=>d(s.id),className:"text-left w-full focus:outline-none",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 truncate",children:s.name}),w(s)]}),e.jsxs("div",{className:"mt-2 flex items-center text-sm text-gray-500 gap-4",children:[e.jsx("span",{className:"font-medium text-gray-700",children:k(s.type)}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:[t("dashboard.created")," ",g(s.createdAt)]}),s.updatedAt!==s.createdAt&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsxs("span",{children:[t("dashboard.updated")," ",g(s.updatedAt)]})]})]})]})}),e.jsxs("div",{className:"flex gap-2 ml-4",children:[e.jsx(l,{variant:"outline",size:"sm",onClick:()=>N(s.id,s.name),title:t("common.reset"),className:"text-orange-700 hover:bg-orange-50 hover:text-orange-700",children:e.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),e.jsx(l,{variant:"outline",size:"sm",onClick:()=>v(s.id),title:t("common.export"),children:e.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})}),e.jsx(l,{variant:"outline",size:"sm",onClick:()=>c(s.id),title:t("common.delete"),className:"text-red-700 hover:bg-red-50 hover:text-red-700",children:e.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})})},s.id))})}),e.jsx(D,{open:i.isOpen,onOpenChange:s=>!s&&u(),children:e.jsxs(L,{children:[e.jsxs(S,{children:[e.jsx(E,{children:t("dashboard.resetConfirm")}),e.jsx(I,{children:t("dashboard.resetConfirmDescription",{name:i.tournamentName})})]}),e.jsxs(B,{children:[e.jsx(O,{onClick:u,children:t("common.cancel")}),e.jsx(F,{onClick:y,className:"bg-orange-600 hover:bg-orange-700",children:t("common.reset")})]})]})})]})})}export{P as default};
