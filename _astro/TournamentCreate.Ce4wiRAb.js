import{j as e,c as P,P as E,u as I,B as c,s as L}from"./TournamentApp.DSHHvmFJ.js";import{r as u}from"./index.DXA_EoSs.js";import{g as k,v as W,c as D}from"./factory.DyD-ZW2I.js";function d({className:l,type:m,...t}){return e.jsx("input",{type:m,"data-slot":"input",className:P("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",l),...t})}var O="Label",T=u.forwardRef((l,m)=>e.jsx(E.label,{...l,ref:m,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(l.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));T.displayName=O;var A=T;function i({className:l,...m}){return e.jsx(A,{"data-slot":"label",className:P("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",l),...m})}function z({onTournamentCreated:l,onCancel:m}){const{t}=I(),[h,g]=u.useState("type"),[o,C]=u.useState(null),[a,r]=u.useState(k("single-elimination")),[b,f]=u.useState(""),[v,p]=u.useState([]),M=s=>{C(s),r(k(s)),g("options")},F=()=>{g("participants")},N=()=>{if(!b.trim())return;const s=a.participantNames||[],n=b.trim();if(s.some(x=>x.toLowerCase()===n.toLowerCase())){p([t("create.duplicateNameError")]);return}p([]),r({...a,participantNames:[...s,n]}),f("")},S=s=>{const n=a.participantNames||[];r({...a,participantNames:n.filter((x,y)=>y!==s)}),p([])},R=()=>{const s=W(a);if(s.length>0){p(s);return}try{const n=D(a);n.start();const x=n.export();L(x),l(n.getId())}catch(n){p([n instanceof Error?n.message:t("create.createError")])}},B=[{type:"single-elimination",label:t("tournamentTypes.singleElimination"),description:t("tournamentTypeDescriptions.singleElimination")},{type:"double-elimination",label:t("tournamentTypes.doubleElimination"),description:t("tournamentTypeDescriptions.doubleElimination")},{type:"round-robin",label:t("tournamentTypes.roundRobin"),description:t("tournamentTypeDescriptions.roundRobin")},{type:"swiss",label:t("tournamentTypes.swiss"),description:t("tournamentTypeDescriptions.swiss")},{type:"free-for-all",label:t("tournamentTypes.freeForAll"),description:t("tournamentTypeDescriptions.freeForAll")}];return e.jsx("div",{className:"min-h-screen bg-gray-50 p-4 md:p-8",children:e.jsx("div",{className:"max-w-3xl mx-auto",children:e.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:t("create.title")}),e.jsx(c,{variant:"ghost",size:"icon",onClick:m,title:t("common.cancel"),children:e.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"flex items-center justify-between",children:[t("create.step.type"),t("create.step.options"),t("create.step.participants")].map((s,n)=>{const y=["type","options","participants"].indexOf(h),w=n===y,j=n<y;return e.jsxs("div",{className:"flex items-center flex-1",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`flex items-center justify-center w-8 h-8 rounded-full ${j||w?"bg-blue-600 text-white":"bg-gray-200 text-gray-600"}`,children:j?"âœ“":n+1}),e.jsx("span",{className:`ml-2 text-sm font-medium ${w?"text-blue-600":j?"text-gray-900":"text-gray-500"}`,children:s})]}),n<2&&e.jsx("div",{className:`flex-1 h-0.5 mx-4 ${j?"bg-blue-600":"bg-gray-200"}`})]},s)})})}),v.length>0&&e.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-md",children:[e.jsx("h3",{className:"text-sm font-medium text-red-800 mb-2",children:t("create.errorTitle")}),e.jsx("ul",{className:"list-disc list-inside text-sm text-red-700 space-y-1",children:v.map((s,n)=>e.jsx("li",{children:s},n))})]}),h==="type"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:t("create.selectType")}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:B.map(s=>e.jsx(c,{variant:"outline",onClick:()=>M(s.type),className:"h-auto text-left p-4 justify-start hover:border-blue-500 hover:bg-blue-50",children:e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:s.label}),e.jsx("p",{className:"text-sm text-gray-600 mt-1 font-normal",children:s.description})]})},s.type))})]}),h==="options"&&o&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:t("create.tournamentOptions")}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"tournament-name",children:t("create.tournamentName")}),e.jsx(d,{id:"tournament-name",type:"text",value:a.name||"",onChange:s=>r({...a,name:s.target.value}),placeholder:t("create.tournamentNamePlaceholder"),className:"mt-2"})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"text-md font-medium text-gray-900 mb-4",children:t("options.matchType")}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-start",children:[e.jsx("input",{type:"radio",checked:(a.matchType||"head-to-head")==="head-to-head",onChange:()=>r({...a,matchType:"head-to-head",playersPerMatch:2,pointsSystem:void 0}),className:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:t("options.matchTypeHeadToHead")}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:t("options.tooltips.matchType")})]})]}),e.jsxs("label",{className:"flex items-start",children:[e.jsx("input",{type:"radio",checked:a.matchType==="multi-player",onChange:()=>r({...a,matchType:"multi-player",playersPerMatch:4}),className:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:t("options.matchTypeMultiPlayer")}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:t("options.tooltips.playersPerMatch")})]})]})]}),a.matchType==="multi-player"&&e.jsxs("div",{className:"mt-4",children:[e.jsx(i,{htmlFor:"players-per-match",children:t("options.playersPerMatch")}),e.jsxs("select",{id:"players-per-match",value:a.playersPerMatch||4,onChange:s=>r({...a,playersPerMatch:parseInt(s.target.value)}),className:"mt-2 w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"3",children:"3"}),e.jsx("option",{value:"4",children:"4"}),e.jsx("option",{value:"5",children:"5"}),e.jsx("option",{value:"6",children:"6"}),e.jsx("option",{value:"8",children:"8"}),e.jsx("option",{value:"12",children:"12"})]})]}),a.matchType==="multi-player"&&(o==="round-robin"||o==="swiss"||o==="free-for-all")&&e.jsxs("div",{className:"mt-4",children:[e.jsx(i,{htmlFor:"points-system",children:t("options.pointsSystem")}),e.jsxs("select",{id:"points-system",value:a.pointsSystem?.type||"mario-kart",onChange:s=>{const n=s.target.value;r({...a,pointsSystem:{type:n}})},className:"mt-2 w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"mario-kart",children:t("options.pointsSystemMarioKart")}),e.jsx("option",{value:"f1",children:t("options.pointsSystemF1")}),e.jsx("option",{value:"linear",children:t("options.pointsSystemLinear")}),e.jsx("option",{value:"winner-takes-most",children:t("options.pointsSystemWinnerTakesMost")})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:a.pointsSystem?.type&&t(`options.tooltips.pointsSystem${a.pointsSystem.type.split("-").map(s=>s.charAt(0).toUpperCase()+s.slice(1)).join("")}`)})]})]}),o==="single-elimination"&&e.jsxs(e.Fragment,{children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:a.thirdPlaceMatch||!1,onChange:s=>r({...a,thirdPlaceMatch:s.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:t("options.thirdPlaceMatch")})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:a.tieBreakers||!1,onChange:s=>r({...a,tieBreakers:s.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:t("options.tieBreakers")})]})]}),o==="double-elimination"&&e.jsxs(e.Fragment,{children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:a.splitStart||!1,onChange:s=>r({...a,splitStart:s.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:t("options.splitStart")})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:a.tieBreakers||!1,onChange:s=>r({...a,tieBreakers:s.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:t("options.tieBreakers")})]})]}),o==="round-robin"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t("options.rankingMethod")}),e.jsxs("select",{value:a.rankingMethod||"wins",onChange:s=>r({...a,rankingMethod:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"wins",children:t("options.rankingWins")}),e.jsx("option",{value:"points",children:t("options.rankingPoints")})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t("options.numberOfRounds")}),e.jsxs("select",{value:a.rounds||1,onChange:s=>r({...a,rounds:parseInt(s.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"1",children:t("options.roundsOnce")}),e.jsx("option",{value:"2",children:t("options.roundsTwice")}),e.jsx("option",{value:"3",children:t("options.roundsThrice")})]})]})]}),o==="swiss"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"points-match-win",children:t("options.pointsPerMatchWin")}),e.jsx(d,{id:"points-match-win",type:"number",min:"0",value:a.pointsPerMatchWin||3,onChange:s=>r({...a,pointsPerMatchWin:parseInt(s.target.value)}),className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"points-match-tie",children:t("options.pointsPerMatchTie")}),e.jsx(d,{id:"points-match-tie",type:"number",min:"0",value:a.pointsPerMatchTie||1,onChange:s=>r({...a,pointsPerMatchTie:parseInt(s.target.value)}),className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"points-game-win",children:t("options.pointsPerGameWin")}),e.jsx(d,{id:"points-game-win",type:"number",min:"0",value:a.pointsPerGameWin||1,onChange:s=>r({...a,pointsPerGameWin:parseInt(s.target.value)}),className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"points-bye",children:t("options.pointsPerBye")}),e.jsx(d,{id:"points-bye",type:"number",min:"0",value:a.pointsPerBye||3,onChange:s=>r({...a,pointsPerBye:parseInt(s.target.value)}),className:"mt-2"})]})]}),a.matchType==="multi-player"&&e.jsxs("div",{className:"mt-4",children:[e.jsx(i,{htmlFor:"match-points-formula",children:t("options.matchPointsFormula")}),e.jsxs("select",{id:"match-points-formula",value:a.matchPointsFormula||"proportional",onChange:s=>r({...a,matchPointsFormula:s.target.value}),className:"mt-2 w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"proportional",children:t("options.matchPointsFormulaProportional")}),e.jsx("option",{value:"winner-only",children:t("options.matchPointsFormulaWinnerOnly")})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:t("options.tooltips.matchPointsFormula")})]})]}),o==="free-for-all"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"participants-per-match",children:t("options.participantsPerMatch")}),e.jsx(d,{id:"participants-per-match",type:"number",min:"2",value:a.participantsPerMatch||a.playersPerMatch||4,onChange:s=>r({...a,participantsPerMatch:parseInt(s.target.value)}),className:"mt-2"})]}),a.matchType==="multi-player"&&e.jsxs("div",{className:"mt-4",children:[e.jsx(i,{htmlFor:"advancement-rule",children:t("options.advancementRule")}),e.jsxs("select",{id:"advancement-rule",value:a.advancementRule||"winner-only",onChange:s=>r({...a,advancementRule:s.target.value,advancementCount:s.target.value==="top-n"?2:void 0}),className:"mt-2 w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"winner-only",children:t("options.advancementRuleWinnerOnly")}),e.jsx("option",{value:"top-n",children:t("options.advancementRuleTopN")})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:t("options.tooltips.advancementRuleTopN")})]}),a.matchType==="multi-player"&&a.advancementRule==="top-n"&&e.jsxs("div",{className:"mt-4",children:[e.jsx(i,{htmlFor:"advancement-count",children:t("options.advancementCount")}),e.jsx(d,{id:"advancement-count",type:"number",min:"2",max:a.participantsPerMatch||4,value:a.advancementCount||2,onChange:s=>r({...a,advancementCount:parseInt(s.target.value)}),className:"mt-2"})]})]}),e.jsxs("div",{className:"flex justify-between pt-4",children:[e.jsx(c,{variant:"outline",onClick:()=>g("type"),children:t("common.back")}),e.jsx(c,{onClick:F,children:t("common.next")})]})]}),h==="participants"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:t("create.addParticipants")}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"participant-name",children:t("create.participantName")}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx(d,{id:"participant-name",type:"text",value:b,onChange:s=>{f(s.target.value),v.length>0&&p([])},onKeyPress:s=>{s.key==="Enter"&&(s.preventDefault(),N())},placeholder:t("create.participantNamePlaceholder"),className:"flex-1"}),e.jsx(c,{onClick:N,children:t("common.add")})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:t("create.participantsList",{count:a.participantNames?.length||0})}),a.participantNames&&a.participantNames.length>0?e.jsx("ul",{className:"space-y-2",children:a.participantNames.map((s,n)=>e.jsxs("li",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-md",children:[e.jsx("span",{className:"text-sm text-gray-900",children:s}),e.jsx(c,{variant:"ghost",size:"icon",onClick:()=>S(n),className:"h-6 w-6 text-red-600 hover:text-red-800 hover:bg-red-50",children:e.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},n))}):e.jsx("p",{className:"text-sm text-gray-500",children:t("create.noParticipants")})]}),e.jsxs("div",{className:"flex justify-between pt-4",children:[e.jsx(c,{variant:"outline",onClick:()=>g("options"),children:t("common.back")}),e.jsx(c,{onClick:R,disabled:(a.participantNames?.length||0)<2,className:"bg-green-600 hover:bg-green-700",children:t("create.createTournament")})]})]})]})})})}export{z as default};
