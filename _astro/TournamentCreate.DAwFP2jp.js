import{j as e,c as P,P as S,u as I,B as l,s as D}from"./TournamentApp.CY9Di9yW.js";import{r as u}from"./index.DXA_EoSs.js";import{g as w,v as W,c as O}from"./factory.mr0xbV1g.js";function c({className:i,type:o,...t}){return e.jsx("input",{type:o,"data-slot":"input",className:P("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",i),...t})}var R="Label",C=u.forwardRef((i,o)=>e.jsx(S.label,{...i,ref:o,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(i.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));C.displayName=R;var A=C;function d({className:i,...o}){return e.jsx(A,{"data-slot":"label",className:P("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",i),...o})}function z({onTournamentCreated:i,onCancel:o}){const{t}=I(),[x,g]=u.useState("type"),[m,T]=u.useState(null),[n,r]=u.useState(w("single-elimination")),[f,v]=u.useState(""),[y,p]=u.useState([]),M=s=>{T(s),r(w(s)),g("options")},B=()=>{g("participants")},N=()=>{if(!f.trim())return;const s=n.participantNames||[],a=f.trim();if(s.some(h=>h.toLowerCase()===a.toLowerCase())){p([t("create.duplicateNameError")]);return}p([]),r({...n,participantNames:[...s,a]}),v("")},E=s=>{const a=n.participantNames||[];r({...n,participantNames:a.filter((h,b)=>b!==s)}),p([])},F=()=>{const s=W(n);if(s.length>0){p(s);return}try{const a=O(n);a.start();const h=a.export();D(h),i(a.getId())}catch(a){p([a instanceof Error?a.message:t("create.createError")])}},L=[{type:"single-elimination",label:t("tournamentTypes.singleElimination"),description:t("tournamentTypeDescriptions.singleElimination")},{type:"double-elimination",label:t("tournamentTypes.doubleElimination"),description:t("tournamentTypeDescriptions.doubleElimination")},{type:"round-robin",label:t("tournamentTypes.roundRobin"),description:t("tournamentTypeDescriptions.roundRobin")},{type:"swiss",label:t("tournamentTypes.swiss"),description:t("tournamentTypeDescriptions.swiss")},{type:"free-for-all",label:t("tournamentTypes.freeForAll"),description:t("tournamentTypeDescriptions.freeForAll")}];return e.jsx("div",{className:"min-h-screen bg-gray-50 p-4 md:p-8",children:e.jsx("div",{className:"max-w-3xl mx-auto",children:e.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:t("create.title")}),e.jsx(l,{variant:"ghost",size:"icon",onClick:o,title:t("common.cancel"),children:e.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"flex items-center justify-between",children:[t("create.step.type"),t("create.step.options"),t("create.step.participants")].map((s,a)=>{const b=["type","options","participants"].indexOf(x),k=a===b,j=a<b;return e.jsxs("div",{className:"flex items-center flex-1",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`flex items-center justify-center w-8 h-8 rounded-full ${j||k?"bg-blue-600 text-white":"bg-gray-200 text-gray-600"}`,children:j?"âœ“":a+1}),e.jsx("span",{className:`ml-2 text-sm font-medium ${k?"text-blue-600":j?"text-gray-900":"text-gray-500"}`,children:s})]}),a<2&&e.jsx("div",{className:`flex-1 h-0.5 mx-4 ${j?"bg-blue-600":"bg-gray-200"}`})]},s)})})}),y.length>0&&e.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-md",children:[e.jsx("h3",{className:"text-sm font-medium text-red-800 mb-2",children:t("create.errorTitle")}),e.jsx("ul",{className:"list-disc list-inside text-sm text-red-700 space-y-1",children:y.map((s,a)=>e.jsx("li",{children:s},a))})]}),x==="type"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:t("create.selectType")}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:L.map(s=>e.jsx(l,{variant:"outline",onClick:()=>M(s.type),className:"h-auto text-left p-4 justify-start hover:border-blue-500 hover:bg-blue-50",children:e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:s.label}),e.jsx("p",{className:"text-sm text-gray-600 mt-1 font-normal",children:s.description})]})},s.type))})]}),x==="options"&&m&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:t("create.tournamentOptions")}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"tournament-name",children:t("create.tournamentName")}),e.jsx(c,{id:"tournament-name",type:"text",value:n.name||"",onChange:s=>r({...n,name:s.target.value}),placeholder:t("create.tournamentNamePlaceholder"),className:"mt-2"})]}),m==="single-elimination"&&e.jsxs(e.Fragment,{children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:n.thirdPlaceMatch||!1,onChange:s=>r({...n,thirdPlaceMatch:s.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:t("options.thirdPlaceMatch")})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:n.tieBreakers||!1,onChange:s=>r({...n,tieBreakers:s.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:t("options.tieBreakers")})]})]}),m==="double-elimination"&&e.jsxs(e.Fragment,{children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:n.splitStart||!1,onChange:s=>r({...n,splitStart:s.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:t("options.splitStart")})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:n.tieBreakers||!1,onChange:s=>r({...n,tieBreakers:s.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:t("options.tieBreakers")})]})]}),m==="round-robin"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t("options.rankingMethod")}),e.jsxs("select",{value:n.rankingMethod||"wins",onChange:s=>r({...n,rankingMethod:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"wins",children:t("options.rankingWins")}),e.jsx("option",{value:"points",children:t("options.rankingPoints")})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t("options.numberOfRounds")}),e.jsxs("select",{value:n.rounds||1,onChange:s=>r({...n,rounds:parseInt(s.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"1",children:t("options.roundsOnce")}),e.jsx("option",{value:"2",children:t("options.roundsTwice")}),e.jsx("option",{value:"3",children:t("options.roundsThrice")})]})]})]}),m==="swiss"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"points-match-win",children:t("options.pointsPerMatchWin")}),e.jsx(c,{id:"points-match-win",type:"number",min:"0",value:n.pointsPerMatchWin||3,onChange:s=>r({...n,pointsPerMatchWin:parseInt(s.target.value)}),className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"points-match-tie",children:t("options.pointsPerMatchTie")}),e.jsx(c,{id:"points-match-tie",type:"number",min:"0",value:n.pointsPerMatchTie||1,onChange:s=>r({...n,pointsPerMatchTie:parseInt(s.target.value)}),className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"points-game-win",children:t("options.pointsPerGameWin")}),e.jsx(c,{id:"points-game-win",type:"number",min:"0",value:n.pointsPerGameWin||1,onChange:s=>r({...n,pointsPerGameWin:parseInt(s.target.value)}),className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"points-bye",children:t("options.pointsPerBye")}),e.jsx(c,{id:"points-bye",type:"number",min:"0",value:n.pointsPerBye||3,onChange:s=>r({...n,pointsPerBye:parseInt(s.target.value)}),className:"mt-2"})]})]})}),m==="free-for-all"&&e.jsxs("div",{children:[e.jsx(d,{htmlFor:"participants-per-match",children:t("options.participantsPerMatch")}),e.jsx(c,{id:"participants-per-match",type:"number",min:"2",value:n.participantsPerMatch||4,onChange:s=>r({...n,participantsPerMatch:parseInt(s.target.value)}),className:"mt-2"})]}),e.jsxs("div",{className:"flex justify-between pt-4",children:[e.jsx(l,{variant:"outline",onClick:()=>g("type"),children:t("common.back")}),e.jsx(l,{onClick:B,children:t("common.next")})]})]}),x==="participants"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:t("create.addParticipants")}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"participant-name",children:t("create.participantName")}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx(c,{id:"participant-name",type:"text",value:f,onChange:s=>{v(s.target.value),y.length>0&&p([])},onKeyPress:s=>{s.key==="Enter"&&(s.preventDefault(),N())},placeholder:t("create.participantNamePlaceholder"),className:"flex-1"}),e.jsx(l,{onClick:N,children:t("common.add")})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:t("create.participantsList",{count:n.participantNames?.length||0})}),n.participantNames&&n.participantNames.length>0?e.jsx("ul",{className:"space-y-2",children:n.participantNames.map((s,a)=>e.jsxs("li",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-md",children:[e.jsx("span",{className:"text-sm text-gray-900",children:s}),e.jsx(l,{variant:"ghost",size:"icon",onClick:()=>E(a),className:"h-6 w-6 text-red-600 hover:text-red-800 hover:bg-red-50",children:e.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},a))}):e.jsx("p",{className:"text-sm text-gray-500",children:t("create.noParticipants")})]}),e.jsxs("div",{className:"flex justify-between pt-4",children:[e.jsx(l,{variant:"outline",onClick:()=>g("options"),children:t("common.back")}),e.jsx(l,{onClick:F,disabled:(n.participantNames?.length||0)<2,className:"bg-green-600 hover:bg-green-700",children:t("create.createTournament")})]})]})]})})})}export{z as default};
